{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"flex justify-between bg-gray-50 rounded-md shadow\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"flex items-center\"\n};\nconst _hoisted_3 = {\n  class: \"text-[25px] text-gray-600 font-light leading-20\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"text-[17px] text-gray-600 font-medium ml-[5px] leading-20 mt-[4px]\"\n};\nconst _hoisted_5 = {\n  class: \"flex flex-wrap -mx-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_FilterView = _resolveComponent(\"FilterView\");\n  const _component_ProductCard = _resolveComponent(\"ProductCard\");\n  return _openBlock(), _createElementBlock(\"div\", null, [$props.filterView ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_FilterView, {\n    onSearchProduct: _cache[0] || (_cache[0] = q => $setup.search(q)),\n    onSortBy: _cache[1] || (_cache[1] = sortBy => $setup.sortByPrice(sortBy))\n  })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"h2\", _hoisted_3, _toDisplayString($props.title), 1 /* TEXT */), $props.showCounter ? (_openBlock(), _createElementBlock(\"h3\", _hoisted_4, \" - \" + _toDisplayString($props.number) + \" ialt\", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.products, (product, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"px-2 w-1/4 mt-5\",\n      ref_for: true,\n      ref: \"product_card\",\n      key: index\n    }, [_createVNode(_component_ProductCard, {\n      id: index,\n      product: product\n    }, null, 8 /* PROPS */, [\"id\", \"product\"])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"mappings":";;;EAE2BA,KAAK,EAAC;;;;EAGxBA,KAAK,EAAC;;;EACLA,KAAK,EAAC;AAAiD;;;EACvDA,KAAK,EAAC;;;EAEPA,KAAK,EAAC;AAAsB;;;;uBARnCC,oBAaM,cAZOC,iBAAU,kBAArBD,oBAEM,OAFNE,UAEM,GADJC,aAAyFC;IAA5EC,eAAa,4BAAGC,CAAC,IAAKC,aAAM,CAACD,CAAC;IAAIE,QAAM,4BAAGC,MAAM,IAAKF,kBAAW,CAACE,MAAM;yBAEvFT,oBAGM,OAHNU,UAGM,GAFJC,oBAA4E,MAA5EC,UAA4E,mBAAbX,YAAK,kBACiBA,kBAAW,kBAAhGD,oBAA2H,MAA3Ha,UAA2H,EAAzB,KAAG,oBAAGZ,aAAM,IAAG,OAAK,yDAExHU,oBAIM,OAJNG,UAIM,sBAHJd,oBAEMe,6BAFqER,eAAQ,GAA3BS,OAAO,EAAEC,KAAK;yBAAtEjB,oBAEM;MAFDD,KAAK,EAAC,iBAAiB;;MAACmB,GAAG,EAAC,cAAc;MAAuCC,GAAG,EAAEF;QACzFd,aAA6CiB;MAA/BC,EAAE,EAAEJ,KAAK;MAAGD,OAAO,EAAEA","names":["class","_createElementBlock","$props","_hoisted_1","_createVNode","_component_FilterView","onSearchProduct","q","$setup","onSortBy","sortBy","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","product","index","ref","key","_component_ProductCard","id"],"sourceRoot":"","sources":["/Users/khaled.el-moussa/Desktop/Projekter/Kal2/frontend/src/components/Content/ProductSection.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-if=\"filterView\" class=\"flex justify-between bg-gray-50 rounded-md shadow\">\n      <FilterView @searchProduct=\"(q) => search(q)\" @sortBy=\"(sortBy) => sortByPrice(sortBy)\"/>\n    </div>\n    <div class=\"flex items-center\" v-else>\n      <h2 class=\"text-[25px] text-gray-600 font-light leading-20\">{{ title }}</h2>\n      <h3 class=\"text-[17px] text-gray-600 font-medium ml-[5px] leading-20 mt-[4px]\" v-if=\"showCounter\"> - {{ number }} ialt</h3>\n    </div>\n    <div class=\"flex flex-wrap -mx-2\">\n      <div class=\"px-2 w-1/4 mt-5\" ref=\"product_card\" v-for=\"(product, index) in products\" :key=\"index\">\n        <ProductCard :id=\"index\" :product=\"product\"/>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { provide, ref } from \"vue\";\n\n  const props = defineProps({\n    title: {\n      type: String\n    },\n    number: {\n      type: Number\n    },\n    showCounter: {\n      type: Boolean,\n      default: false\n    },\n    filterView: {\n      type: Boolean,\n      default: false\n    },\n    products: {\n      type: Object\n    }\n  });\n\n  // Get the standarded products from pageload\n  const apiProducts = props.products.slice(0, props.number);\n\n  // Manipulate products array by search and filters\n  const products = ref(apiProducts);\n\n  // On search\n  const search = (q) => {\n    if (q === '') {\n      products.value = apiProducts;\n    }\n\n    products.value = products.value.filter((item) => item.title.toLowerCase().includes(q.toLowerCase()));\n  }\n\n  const sortByPrice = (sortBy) => {\n    switch (sortBy) {\n      case 'none':\n        products.value = products.value.sort();\n        break;\n      case 'price_low':\n        products.value = products.value.sort((a,b) => {\n          let fa = a.price, fb = b.price;\n          if (fa < fb) {\n            return -1\n          }\n          if (fa > fb) {\n            return 1\n          }\n          return 0\n        });\n        break;\n      case 'price_high':\n        products.value = products.value.sort((b,a) => {\n          let fa = a.price, fb = b.price;\n          if (fa < fb) {\n            return -1\n          }\n          if (fa > fb) {\n            return 1\n          }\n          return 0\n        });\n        break;\n    }\n  }\n\n  // Provide the data to the FilterComponent\n  provide('provideData', { title: props.title, showCounter: props.showCounter, number: props.number })\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}