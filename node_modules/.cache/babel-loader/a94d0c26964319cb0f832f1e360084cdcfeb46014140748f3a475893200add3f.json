{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from \"@/router\";\nclass Auth {\n  constructor() {\n    this.token = window.localStorage.getItem('token');\n    let userData = window.localStorage.getItem('user');\n    this.user = userData ? JSON.parse(userData) : null;\n    if (this.token) {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + this.token;\n    }\n  }\n  login(token, user) {\n    window.localStorage.setItem('token', token);\n    window.localStorage.setItem('user', JSON.stringify(user));\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    this.token = token;\n    this.user = user;\n  }\n  check() {\n    // If token unvalid, force logout\n    if (this.token) {\n      try {\n        axios.get('validate-token');\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          window.localStorage.removeItem('token');\n          window.localStorage.removeItem('user');\n          return router.push({\n            path: '/login'\n          });\n        }\n      }\n    }\n    return !!this.token;\n  }\n  logout(route = 'index') {\n    // window.localStorage.clear();\n    window.localStorage.removeItem('token');\n    window.localStorage.removeItem('user');\n    this.user = null;\n  }\n}\nexport default new Auth();","map":{"version":3,"names":["axios","router","Auth","constructor","token","window","localStorage","getItem","userData","user","JSON","parse","defaults","headers","common","login","setItem","stringify","check","get","error","response","status","removeItem","push","path","logout","route"],"sources":["/Users/khaled.el-moussa/Desktop/Projekter/Kal2/frontend/src/models/Auth.js"],"sourcesContent":["import axios from 'axios';\nimport router from \"@/router\";\n\nclass Auth {\n  constructor () {\n    this.token = window.localStorage.getItem('token');\n    let userData = window.localStorage.getItem('user');\n    this.user = userData ? JSON.parse(userData) : null;\n    if (this.token) {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + this.token;\n    }\n  }\n  login (token, user) {\n    window.localStorage.setItem('token', token);\n    window.localStorage.setItem('user', JSON.stringify(user));\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    this.token = token;\n    this.user = user;\n  }\n  check() {\n    // If token unvalid, force logout\n    if (this.token) {\n      try {\n        axios.get('validate-token')\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          window.localStorage.removeItem('token');\n          window.localStorage.removeItem('user');\n          return router.push({ path: '/login' });\n        }\n      }\n    }\n\n    return !! this.token;\n  }\n  logout (route = 'index') {\n    // window.localStorage.clear();\n    window.localStorage.removeItem('token');\n    window.localStorage.removeItem('user');\n    this.user = null;\n  }\n}\nexport default new Auth();"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,UAAU;AAE7B,MAAMC,IAAI,CAAC;EACTC,WAAW,GAAI;IACb,IAAI,CAACC,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACjD,IAAIC,QAAQ,GAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAClD,IAAI,CAACE,IAAI,GAAGD,QAAQ,GAAGE,IAAI,CAACC,KAAK,CAACH,QAAQ,CAAC,GAAG,IAAI;IAClD,IAAI,IAAI,CAACJ,KAAK,EAAE;MACdJ,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAG,IAAI,CAACV,KAAK;IACzE;EACF;EACAW,KAAK,CAAEX,KAAK,EAAEK,IAAI,EAAE;IAClBJ,MAAM,CAACC,YAAY,CAACU,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;IAC3CC,MAAM,CAACC,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEN,IAAI,CAACO,SAAS,CAACR,IAAI,CAAC,CAAC;IACzDT,KAAK,CAACY,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGV,KAAK;IAClE,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACK,IAAI,GAAGA,IAAI;EAClB;EACAS,KAAK,GAAG;IACN;IACA,IAAI,IAAI,CAACd,KAAK,EAAE;MACd,IAAI;QACFJ,KAAK,CAACmB,GAAG,CAAC,gBAAgB,CAAC;MAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,IAAIA,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;UACnDjB,MAAM,CAACC,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC;UACvClB,MAAM,CAACC,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC;UACtC,OAAOtB,MAAM,CAACuB,IAAI,CAAC;YAAEC,IAAI,EAAE;UAAS,CAAC,CAAC;QACxC;MACF;IACF;IAEA,OAAO,CAAC,CAAE,IAAI,CAACrB,KAAK;EACtB;EACAsB,MAAM,CAAEC,KAAK,GAAG,OAAO,EAAE;IACvB;IACAtB,MAAM,CAACC,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC;IACvClB,MAAM,CAACC,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC;IACtC,IAAI,CAACd,IAAI,GAAG,IAAI;EAClB;AACF;AACA,eAAe,IAAIP,IAAI,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}