{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/**\n * Trumbowyg v2.26.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link http://alex-d.github.io/Trumbowyg\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n  langs: {\n    en: {\n      viewHTML: 'View HTML',\n      undo: 'Undo',\n      redo: 'Redo',\n      formatting: 'Formatting',\n      p: 'Paragraph',\n      blockquote: 'Quote',\n      code: 'Code',\n      header: 'Header',\n      bold: 'Bold',\n      italic: 'Italic',\n      strikethrough: 'Strikethrough',\n      underline: 'Underline',\n      strong: 'Strong',\n      em: 'Emphasis',\n      del: 'Deleted',\n      superscript: 'Superscript',\n      subscript: 'Subscript',\n      unorderedList: 'Unordered list',\n      orderedList: 'Ordered list',\n      insertImage: 'Insert Image',\n      link: 'Link',\n      createLink: 'Insert link',\n      unlink: 'Remove link',\n      _self: 'Same tab (default)',\n      _blank: 'New tab',\n      justifyLeft: 'Align Left',\n      justifyCenter: 'Align Center',\n      justifyRight: 'Align Right',\n      justifyFull: 'Align Justify',\n      horizontalRule: 'Insert horizontal rule',\n      removeformat: 'Remove format',\n      fullscreen: 'Fullscreen',\n      close: 'Close',\n      submit: 'Confirm',\n      reset: 'Cancel',\n      required: 'Required',\n      description: 'Description',\n      title: 'Title',\n      text: 'Text',\n      target: 'Target',\n      width: 'Width'\n    }\n  },\n  // Plugins\n  plugins: {},\n  // SVG Path globally\n  svgPath: null,\n  svgAbsoluteUseHref: false,\n  hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n  value: {\n    lang: 'en',\n    fixedBtnPane: false,\n    fixedFullWidth: false,\n    autogrow: false,\n    autogrowOnEnter: false,\n    imageWidthModalEdit: false,\n    hideButtonTexts: null,\n    prefix: 'trumbowyg-',\n    tagClasses: {},\n    semantic: true,\n    semanticKeepAttributes: false,\n    resetCss: false,\n    removeformatPasted: false,\n    tabToIndent: false,\n    tagsToRemove: [],\n    tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n    btns: [['viewHTML'], ['undo', 'redo'],\n    // Only supported in Blink browsers\n    ['formatting'], ['strong', 'em', 'del'], ['superscript', 'subscript'], ['link'], ['insertImage'], ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'], ['unorderedList', 'orderedList'], ['horizontalRule'], ['removeformat'], ['fullscreen']],\n    // For custom button definitions\n    btnsDef: {},\n    changeActiveDropdownIcon: false,\n    inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n    pasteHandlers: [],\n    // imgDblClickHandler: default is defined in constructor\n\n    plugins: {},\n    urlProtocol: false,\n    minimalLinks: false,\n    linkTargets: ['_self', '_blank'],\n    svgPath: null\n  },\n  writable: false,\n  enumerable: true,\n  configurable: false\n});\n(function (navigator, window, document, $) {\n  'use strict';\n\n  var CONFIRM_EVENT = 'tbwconfirm',\n    CANCEL_EVENT = 'tbwcancel';\n  $.fn.trumbowyg = function (options, params) {\n    var trumbowygDataName = 'trumbowyg';\n    if (options === Object(options) || !options) {\n      return this.each(function () {\n        if (!$(this).data(trumbowygDataName)) {\n          $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n        }\n      });\n    }\n    if (this.length === 1) {\n      try {\n        var t = $(this).data(trumbowygDataName);\n        switch (options) {\n          // Exec command\n          case 'execCmd':\n            return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n          // Modal box\n          case 'openModal':\n            return t.openModal(params.title, params.content);\n          case 'closeModal':\n            return t.closeModal();\n          case 'openModalInsert':\n            return t.openModalInsert(params.title, params.fields, params.callback);\n\n          // Range\n          case 'saveRange':\n            return t.saveRange();\n          case 'getRange':\n            return t.range;\n          case 'getRangeText':\n            return t.getRangeText();\n          case 'restoreRange':\n            return t.restoreRange();\n\n          // Enable/disable\n          case 'enable':\n            return t.setDisabled(false);\n          case 'disable':\n            return t.setDisabled(true);\n\n          // Toggle\n          case 'toggle':\n            return t.toggle();\n\n          // Destroy\n          case 'destroy':\n            return t.destroy();\n\n          // Empty\n          case 'empty':\n            return t.empty();\n\n          // HTML\n          case 'html':\n            return t.html(params);\n        }\n      } catch (c) {}\n    }\n    return false;\n  };\n\n  // @param: editorElem is the DOM element\n  var Trumbowyg = function (editorElem, options) {\n    var t = this,\n      trumbowygIconsId = 'trumbowyg-icons',\n      $trumbowyg = $.trumbowyg;\n\n    // Get the document of the element. It use to makes the plugin\n    // compatible on iframes.\n    t.doc = editorElem.ownerDocument || document;\n\n    // jQuery object of the editor\n    t.$ta = $(editorElem); // $ta : Textarea\n    t.$c = $(editorElem); // $c : creator\n\n    options = options || {};\n\n    // Localization management\n    if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n      t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n    } else {\n      t.lang = $trumbowyg.langs.en;\n    }\n    t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n    // SVG path\n    var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n    t.hasSvg = svgPathOption !== false;\n    if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n      if (svgPathOption == null) {\n        // Hack to get svgPathOption based on trumbowyg.js path\n        var $scriptElements = $('script[src]');\n        $scriptElements.each(function (i, scriptElement) {\n          var source = scriptElement.src;\n          var matches = source.match('trumbowyg(\\.min)?\\.js');\n          if (matches != null) {\n            svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n          }\n        });\n      }\n\n      // Do not merge with previous if block: svgPathOption can be redefined in it.\n      // Here we are checking that we find a match\n      if (svgPathOption == null) {\n        console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n      } else if (!$trumbowyg.svgAbsoluteUseHref) {\n        var div = t.doc.createElement('div');\n        div.id = trumbowygIconsId;\n        t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n        $.ajax({\n          async: true,\n          type: 'GET',\n          contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n          dataType: 'xml',\n          crossDomain: true,\n          url: svgPathOption,\n          data: null,\n          beforeSend: null,\n          complete: null,\n          success: function (data) {\n            div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\n          }\n        });\n      }\n    }\n    var baseHref = !!t.doc.querySelector('base') ? window.location.href.replace(window.location.hash, '') : '';\n    t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n\n    /**\n     * When the button is associated to a empty object\n     * fn and title attributes are defined from the button key value\n     *\n     * For example\n     *      foo: {}\n     * is equivalent to :\n     *      foo: {\n     *          fn: 'foo',\n     *          title: this.lang.foo\n     *      }\n     */\n    var h = t.lang.header,\n      // Header translation\n      isBlinkFunction = function () {\n        return (window.chrome || window.Intl && Intl.v8BreakIterator) && 'CSS' in window;\n      };\n    t.btnsDef = {\n      viewHTML: {\n        fn: 'toggle',\n        class: 'trumbowyg-not-disable'\n      },\n      undo: {\n        isSupported: isBlinkFunction,\n        key: 'Z'\n      },\n      redo: {\n        isSupported: isBlinkFunction,\n        key: 'Y'\n      },\n      p: {\n        fn: 'formatBlock'\n      },\n      blockquote: {\n        fn: 'formatBlock'\n      },\n      h1: {\n        fn: 'formatBlock',\n        title: h + ' 1'\n      },\n      h2: {\n        fn: 'formatBlock',\n        title: h + ' 2'\n      },\n      h3: {\n        fn: 'formatBlock',\n        title: h + ' 3'\n      },\n      h4: {\n        fn: 'formatBlock',\n        title: h + ' 4'\n      },\n      h5: {\n        fn: 'formatBlock',\n        title: h + ' 5'\n      },\n      h6: {\n        fn: 'formatBlock',\n        title: h + ' 6'\n      },\n      subscript: {\n        tag: 'sub'\n      },\n      superscript: {\n        tag: 'sup'\n      },\n      bold: {\n        key: 'B',\n        tag: 'b'\n      },\n      italic: {\n        key: 'I',\n        tag: 'i'\n      },\n      underline: {\n        tag: 'u'\n      },\n      strikethrough: {\n        tag: 'strike'\n      },\n      strong: {\n        fn: 'bold',\n        key: 'B'\n      },\n      em: {\n        fn: 'italic',\n        key: 'I'\n      },\n      del: {\n        fn: 'strikethrough'\n      },\n      createLink: {\n        key: 'K',\n        tag: 'a'\n      },\n      unlink: {},\n      insertImage: {},\n      justifyLeft: {\n        tag: 'left',\n        forceCss: true\n      },\n      justifyCenter: {\n        tag: 'center',\n        forceCss: true\n      },\n      justifyRight: {\n        tag: 'right',\n        forceCss: true\n      },\n      justifyFull: {\n        tag: 'justify',\n        forceCss: true\n      },\n      unorderedList: {\n        fn: 'insertUnorderedList',\n        tag: 'ul'\n      },\n      orderedList: {\n        fn: 'insertOrderedList',\n        tag: 'ol'\n      },\n      horizontalRule: {\n        fn: 'insertHorizontalRule'\n      },\n      removeformat: {},\n      fullscreen: {\n        class: 'trumbowyg-not-disable'\n      },\n      close: {\n        fn: 'destroy',\n        class: 'trumbowyg-not-disable'\n      },\n      // Dropdowns\n      formatting: {\n        dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n        ico: 'p'\n      },\n      link: {\n        dropdown: ['createLink', 'unlink']\n      }\n    };\n\n    // Default Options\n    t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n    if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n      t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n    }\n    t.urlPrefix = t.setupUrlPrefix();\n    t.disabled = t.o.disabled || editorElem.nodeName === 'TEXTAREA' && editorElem.disabled;\n    if (options.btns) {\n      t.o.btns = options.btns;\n    } else if (!t.o.semantic) {\n      t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n    }\n    $.each(t.o.btnsDef, function (btnName, btnDef) {\n      t.addBtnDef(btnName, btnDef);\n    });\n\n    // put this here in the event it would be merged in with options\n    t.eventNamespace = 'trumbowyg-event';\n\n    // Keyboard shortcuts are load in this array\n    t.keys = [];\n\n    // Tag to button dynamically hydrated\n    t.tagToButton = {};\n    t.tagHandlers = [];\n\n    // Admit multiple paste handlers\n    t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n    // Check if browser is IE\n    t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n    // Check if we are on macOs\n    t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n    t.init();\n  };\n  Trumbowyg.prototype = {\n    DEFAULT_SEMANTIC_MAP: {\n      'b': 'strong',\n      'i': 'em',\n      's': 'del',\n      'strike': 'del',\n      'div': 'p'\n    },\n    init: function () {\n      var t = this;\n      t.height = t.$ta.height();\n      t.initPlugins();\n      try {\n        // Disable image resize, try-catch for old IE\n        t.doc.execCommand('enableObjectResizing', false, false);\n        t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n      } catch (e) {}\n      t.buildEditor();\n      t.buildBtnPane();\n      t.fixedBtnPaneEvents();\n      t.buildOverlay();\n      setTimeout(function () {\n        if (t.disabled) {\n          t.setDisabled(true);\n        }\n        t.$c.trigger('tbwinit');\n      });\n    },\n    addBtnDef: function (btnName, btnDef) {\n      this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n    },\n    setupUrlPrefix: function () {\n      var protocol = this.o.urlProtocol;\n      if (!protocol) {\n        return;\n      }\n      if (typeof protocol !== 'string') {\n        return 'https://';\n      }\n      return protocol.replace('://', '') + '://';\n    },\n    buildEditor: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        html = '';\n      t.$box = $('<div/>', {\n        class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n      });\n\n      // $ta = Textarea\n      // $ed = Editor\n      t.isTextarea = t.$ta.is('textarea');\n      if (t.isTextarea) {\n        html = t.$ta.val();\n        t.$ed = $('<div/>');\n        t.$box.insertAfter(t.$ta).append(t.$ed, t.$ta);\n      } else {\n        t.$ed = t.$ta;\n        html = t.$ed.html();\n        t.$ta = $('<textarea/>', {\n          name: t.$ta.attr('id'),\n          height: t.height\n        }).val(html);\n        t.$box.insertAfter(t.$ed).append(t.$ta, t.$ed);\n        t.syncCode();\n      }\n      t.$ta.addClass(prefix + 'textarea').attr('tabindex', -1);\n      t.$ed.addClass(prefix + 'editor').attr({\n        contenteditable: true,\n        dir: t.lang._dir || 'ltr'\n      }).html(html);\n      if (t.o.tabindex) {\n        t.$ed.attr('tabindex', t.o.tabindex);\n      }\n      if (t.$c.is('[placeholder]')) {\n        t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n      }\n      if (t.$c.is('[spellcheck]')) {\n        t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n      }\n      if (t.o.resetCss) {\n        t.$ed.addClass(prefix + 'reset-css');\n      }\n      if (!t.o.autogrow) {\n        t.$ta.add(t.$ed).css({\n          height: t.height\n        });\n      }\n      t.semanticCode();\n      if (t.o.autogrowOnEnter) {\n        t.$ed.addClass(prefix + 'autogrow-on-enter');\n      }\n      var ctrl = false,\n        composition = false,\n        debounceButtonPaneStatus;\n      t.$ed.on('dblclick', 'img', t.o.imgDblClickHandler).on('keydown', function (e) {\n        // append flags to differentiate Chrome spans\n        var keyCode = e.which;\n        if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n          t.toggleSpan(true);\n        }\n        if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n          ctrl = true;\n          var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n          try {\n            t.execCmd(key.fn, key.param);\n            return false;\n          } catch (c) {}\n        } else {\n          if (t.o.tabToIndent && e.key === 'Tab') {\n            try {\n              if (e.shiftKey) {\n                t.execCmd('outdent', true, null);\n              } else {\n                t.execCmd('indent', true, null);\n              }\n              return false;\n            } catch (c) {}\n          }\n        }\n      }).on('compositionstart compositionupdate', function () {\n        composition = true;\n      }).on('keyup compositionend', function (e) {\n        if (e.type === 'compositionend') {\n          composition = false;\n        } else if (composition) {\n          return;\n        }\n        var keyCode = e.which;\n        if (keyCode >= 37 && keyCode <= 40) {\n          return;\n        }\n\n        // remove Chrome generated span tags\n        if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n          t.toggleSpan();\n        }\n        if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n          t.semanticCode(false, true);\n          t.$c.trigger('tbwchange');\n        } else if (!ctrl && keyCode !== 17) {\n          var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n          t.semanticCode(false, compositionEndIE && keyCode === 13);\n          t.$c.trigger('tbwchange');\n        } else if (typeof e.which === 'undefined') {\n          t.semanticCode(false, false, true);\n        }\n        setTimeout(function () {\n          ctrl = false;\n        }, 50);\n      }).on('mouseup keydown keyup', function (e) {\n        if (!e.ctrlKey && !e.metaKey || e.altKey) {\n          setTimeout(function () {\n            // \"hold on\" to the ctrl key for 50ms\n            ctrl = false;\n          }, 50);\n        }\n        clearTimeout(debounceButtonPaneStatus);\n        debounceButtonPaneStatus = setTimeout(function () {\n          t.updateButtonPaneStatus();\n        }, 50);\n      }).on('focus blur', function (e) {\n        if (e.type === 'blur') {\n          t.clearButtonPaneStatus();\n        }\n        t.$c.trigger('tbw' + e.type);\n        if (t.o.autogrowOnEnter) {\n          if (t.autogrowOnEnterDontClose) {\n            return;\n          }\n          if (e.type === 'focus') {\n            t.autogrowOnEnterWasFocused = true;\n            t.autogrowEditorOnEnter();\n          } else if (!t.o.autogrow) {\n            t.$ed.css({\n              height: t.$ed.css('min-height')\n            });\n            t.$c.trigger('tbwresize');\n          }\n        }\n      }).on('keyup focus', function () {\n        if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n          setTimeout(function () {\n            var block = t.isIE ? '<p>' : 'p';\n            t.doc.execCommand('formatBlock', false, block);\n            t.syncCode();\n          }, 0);\n        }\n      }).on('cut drop', function () {\n        setTimeout(function () {\n          t.semanticCode(false, true);\n          t.$c.trigger('tbwchange');\n        }, 0);\n      }).on('paste', function (e) {\n        if (t.o.removeformatPasted) {\n          e.preventDefault();\n          if (window.getSelection && window.getSelection().deleteFromDocument) {\n            window.getSelection().deleteFromDocument();\n          }\n          try {\n            // IE\n            var text = window.clipboardData.getData('Text');\n            try {\n              // <= IE10\n              t.doc.selection.createRange().pasteHTML(text);\n            } catch (c) {\n              // IE 11\n              t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n            }\n            t.$c.trigger('tbwchange', e);\n          } catch (d) {\n            // Not IE\n            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n          }\n        }\n\n        // Call pasteHandlers\n        $.each(t.pasteHandlers, function (i, pasteHandler) {\n          pasteHandler(e);\n        });\n        setTimeout(function () {\n          t.semanticCode(false, true);\n          t.$c.trigger('tbwpaste', e);\n          t.$c.trigger('tbwchange');\n        }, 0);\n      });\n      t.$ta.on('keyup', function () {\n        t.$c.trigger('tbwchange');\n      }).on('paste', function () {\n        setTimeout(function () {\n          t.$c.trigger('tbwchange');\n        }, 0);\n      });\n      $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n        if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n          t.closeModal();\n          return false;\n        }\n      });\n    },\n    //autogrow when entering logic\n    autogrowEditorOnEnter: function () {\n      var t = this;\n      t.$ed.removeClass('autogrow-on-enter');\n      var oldHeight = t.$ed[0].clientHeight;\n      t.$ed.height('auto');\n      var totalHeight = t.$ed[0].scrollHeight;\n      t.$ed.addClass('autogrow-on-enter');\n      if (oldHeight !== totalHeight) {\n        t.$ed.height(oldHeight);\n        setTimeout(function () {\n          t.$ed.css({\n            height: totalHeight\n          });\n          t.$c.trigger('tbwresize');\n        }, 0);\n      }\n    },\n    // Build button pane, use o.btns option\n    buildBtnPane: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      var $btnPane = t.$btnPane = $('<div/>', {\n        class: prefix + 'button-pane'\n      });\n      $.each(t.o.btns, function (i, btnGrp) {\n        if (!$.isArray(btnGrp)) {\n          btnGrp = [btnGrp];\n        }\n        var $btnGroup = $('<div/>', {\n          class: prefix + 'button-group ' + (btnGrp.indexOf('fullscreen') >= 0 ? prefix + 'right' : '')\n        });\n        $.each(btnGrp, function (i, btn) {\n          try {\n            // Prevent buildBtn error\n            if (t.isSupportedBtn(btn)) {\n              // It's a supported button\n              $btnGroup.append(t.buildBtn(btn));\n            }\n          } catch (c) {}\n        });\n        if ($btnGroup.html().trim().length > 0) {\n          $btnPane.append($btnGroup);\n        }\n      });\n      t.$box.prepend($btnPane);\n    },\n    // Build a button and his action\n    buildBtn: function (btnName) {\n      // btnName is name of the button\n      var t = this,\n        prefix = t.o.prefix,\n        btn = t.btnsDef[btnName],\n        isDropdown = btn.dropdown,\n        hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n        textDef = t.lang[btnName] || btnName,\n        $btn = $('<button/>', {\n          type: 'button',\n          class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n          html: t.hasSvg && hasIcon ? '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' : t.hideButtonTexts ? '' : btn.text || btn.title || t.lang[btnName] || btnName,\n          title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n          tabindex: -1,\n          mousedown: function () {\n            if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n              $('body', t.doc).trigger('mousedown');\n            }\n            if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) && !$(this).hasClass(prefix + 'active') && !$(this).hasClass(prefix + 'not-disable')) {\n              return false;\n            }\n            t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n            return false;\n          }\n        });\n      if (isDropdown) {\n        $btn.addClass(prefix + 'open-dropdown');\n        var dropdownPrefix = prefix + 'dropdown',\n          dropdownOptions = {\n            // the dropdown\n            class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n          };\n        dropdownOptions['data-' + dropdownPrefix] = btnName;\n        var $dropdown = $('<div/>', dropdownOptions);\n        $.each(isDropdown, function (i, def) {\n          if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n            $dropdown.append(t.buildSubBtn(def));\n          }\n        });\n        t.$box.append($dropdown.hide());\n      } else if (btn.key) {\n        t.keys[btn.key] = {\n          fn: btn.fn || btnName,\n          param: btn.param || btnName\n        };\n      }\n      if (!isDropdown) {\n        t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n      }\n      return $btn;\n    },\n    // Build a button for dropdown menu\n    // @param n : name of the subbutton\n    buildSubBtn: function (btnName) {\n      var t = this,\n        prefix = t.o.prefix,\n        btn = t.btnsDef[btnName],\n        hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n      if (btn.key) {\n        t.keys[btn.key] = {\n          fn: btn.fn || btnName,\n          param: btn.param || btnName\n        };\n      }\n      t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n      return $('<button/>', {\n        type: 'button',\n        class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n        html: t.hasSvg && hasIcon ? '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) : btn.text || btn.title || t.lang[btnName] || btnName,\n        title: btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null,\n        style: btn.style || null,\n        mousedown: function () {\n          $('body', t.doc).trigger('mousedown');\n          t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n          return false;\n        }\n      });\n    },\n    // Check if button is supported\n    isSupportedBtn: function (btnName) {\n      try {\n        return this.btnsDef[btnName].isSupported();\n      } catch (e) {}\n      return true;\n    },\n    // Build overlay for modal box\n    buildOverlay: function () {\n      var t = this;\n      t.$overlay = $('<div/>', {\n        class: t.o.prefix + 'overlay'\n      }).appendTo(t.$box);\n      return t.$overlay;\n    },\n    showOverlay: function () {\n      var t = this;\n      $(window).trigger('scroll');\n      t.$overlay.fadeIn(200);\n      t.$box.addClass(t.o.prefix + 'box-blur');\n    },\n    hideOverlay: function () {\n      var t = this;\n      t.$overlay.fadeOut(50);\n      t.$box.removeClass(t.o.prefix + 'box-blur');\n    },\n    // Management of fixed button pane\n    fixedBtnPaneEvents: function () {\n      var t = this,\n        fixedFullWidth = t.o.fixedFullWidth,\n        $box = t.$box;\n      if (!t.o.fixedBtnPane) {\n        return;\n      }\n      t.isFixed = false;\n      $(window).on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n        if (!$box) {\n          return;\n        }\n        t.syncCode();\n        var scrollTop = $(window).scrollTop(),\n          offset = $box.offset().top + 1,\n          $buttonPane = t.$btnPane,\n          buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n        if (scrollTop - offset > 0 && scrollTop - offset - t.height < 0) {\n          if (!t.isFixed) {\n            t.isFixed = true;\n            $buttonPane.css({\n              position: 'fixed',\n              top: 0,\n              left: fixedFullWidth ? 0 : 'auto',\n              zIndex: 7\n            });\n            t.$box.css({\n              paddingTop: $buttonPane.height()\n            });\n          }\n          $buttonPane.css({\n            width: fixedFullWidth ? '100%' : $box.width() - 1\n          });\n          $('.' + t.o.prefix + 'fixed-top', $box).css({\n            position: fixedFullWidth ? 'fixed' : 'absolute',\n            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n            zIndex: 15\n          });\n        } else if (t.isFixed) {\n          t.isFixed = false;\n          $buttonPane.removeAttr('style');\n          t.$box.css({\n            paddingTop: 0\n          });\n          $('.' + t.o.prefix + 'fixed-top', $box).css({\n            position: 'absolute',\n            top: buttonPaneOuterHeight\n          });\n        }\n      });\n    },\n    // Disable editor\n    setDisabled: function (disable) {\n      var t = this,\n        prefix = t.o.prefix;\n      t.disabled = disable;\n      if (disable) {\n        t.$ta.attr('disabled', true);\n      } else {\n        t.$ta.removeAttr('disabled');\n      }\n      t.$box.toggleClass(prefix + 'disabled', disable);\n      t.$ed.attr('contenteditable', !disable);\n    },\n    // Destroy the editor\n    destroy: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      if (t.isTextarea) {\n        t.$box.after(t.$ta.css({\n          height: ''\n        }).val(t.html()).removeClass(prefix + 'textarea').show());\n      } else {\n        t.$box.after(t.$ed.css({\n          height: ''\n        }).removeClass(prefix + 'editor').removeAttr('contenteditable').removeAttr('dir').html(t.html()).show());\n      }\n      t.$ed.off('dblclick', 'img');\n      t.destroyPlugins();\n      t.$box.remove();\n      t.$c.removeData('trumbowyg');\n      $('body').removeClass(prefix + 'body-fullscreen');\n      t.$c.trigger('tbwclose');\n      $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n      $(t.doc.body).off('keydown.' + t.eventNamespace);\n    },\n    // Empty the editor\n    empty: function () {\n      this.$ta.val('');\n      this.syncCode(true);\n    },\n    // Function call when click on viewHTML button\n    toggle: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      if (t.o.autogrowOnEnter) {\n        t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n      }\n      t.semanticCode(false, true);\n      t.$c.trigger('tbwchange');\n      setTimeout(function () {\n        t.doc.activeElement.blur();\n        t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n        t.$btnPane.toggleClass(prefix + 'disable');\n        $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n        if (t.$box.hasClass(prefix + 'editor-visible')) {\n          t.$ta.attr('tabindex', -1);\n        } else {\n          t.$ta.removeAttr('tabindex');\n        }\n        if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n          t.autogrowEditorOnEnter();\n        }\n      }, 0);\n    },\n    // Remove or add flags to span tags to remove Chrome generated spans\n    toggleSpan: function (addFlag) {\n      var t = this;\n      t.$ed.find('span').each(function () {\n        if (addFlag === true) {\n          $(this).attr('data-tbw-flag', true);\n        } else {\n          if ($(this).attr('data-tbw-flag')) {\n            $(this).removeAttr('data-tbw-flag');\n          } else {\n            $(this).contents().unwrap();\n          }\n        }\n      });\n    },\n    // Open dropdown when click on a button which open that\n    dropdown: function (name) {\n      var t = this,\n        $body = $('body', t.doc),\n        prefix = t.o.prefix,\n        $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n        $btn = $('.' + prefix + name + '-button', t.$btnPane),\n        show = $dropdown.is(':hidden');\n      $body.trigger('mousedown');\n      if (show) {\n        var btnOffsetLeft = $btn.offset().left;\n        $btn.addClass(prefix + 'active');\n        $dropdown.css({\n          position: 'absolute',\n          top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n          left: t.o.fixedFullWidth && t.isFixed ? btnOffsetLeft : btnOffsetLeft - t.$btnPane.offset().left\n        }).show();\n        $(window).trigger('scroll');\n        $body.on('mousedown.' + t.eventNamespace, function (e) {\n          if (!$dropdown.is(e.target)) {\n            $('.' + prefix + 'dropdown', t.$box).hide();\n            $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n            $body.off('mousedown.' + t.eventNamespace);\n          }\n        });\n      }\n    },\n    // HTML Code management\n    html: function (html) {\n      var t = this;\n      if (html != null) {\n        t.$ta.val(html);\n        t.syncCode(true);\n        t.$c.trigger('tbwchange');\n        return t;\n      }\n      return t.$ta.val();\n    },\n    syncTextarea: function () {\n      var t = this;\n      t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n    },\n    syncCode: function (force) {\n      var t = this;\n      if (!force && t.$ed.is(':visible')) {\n        t.syncTextarea();\n      } else {\n        // wrap the content in a div it's easier to get the inner html\n        var html = $('<div>').html(t.$ta.val());\n        // scrub the html before loading into the doc\n        var safe = $('<div>').append(html);\n        $(t.o.tagsToRemove.join(','), safe).remove();\n        t.$ed.html(safe.contents().html());\n      }\n      if (t.o.autogrow) {\n        t.height = t.$ed.height();\n        if (t.height !== t.$ta.css('height')) {\n          t.$ta.css({\n            height: t.height\n          });\n          t.$c.trigger('tbwresize');\n        }\n      }\n      if (t.o.autogrowOnEnter) {\n        t.$ed.height('auto');\n        var totalHeight = t.autogrowOnEnterWasFocused ? t.$ed[0].scrollHeight : t.$ed.css('min-height');\n        if (totalHeight !== t.$ta.css('height')) {\n          t.$ed.css({\n            height: totalHeight\n          });\n          t.$c.trigger('tbwresize');\n        }\n      }\n    },\n    // Analyse and update to semantic code\n    // @param force : force to sync code from textarea\n    // @param full  : wrap text nodes in <p>\n    // @param keepRange  : leave selection range as it is\n    semanticCode: function (force, full, keepRange) {\n      var t = this;\n      t.saveRange();\n      t.syncCode(force);\n      var restoreRange = true;\n      if (t.range && t.range.collapsed) {\n        restoreRange = false;\n      }\n      if (t.o.semantic) {\n        t.semanticTag('b', t.o.semanticKeepAttributes);\n        t.semanticTag('i', t.o.semanticKeepAttributes);\n        t.semanticTag('s', t.o.semanticKeepAttributes);\n        t.semanticTag('strike', t.o.semanticKeepAttributes);\n        if (full) {\n          var inlineElementsSelector = t.o.inlineElementsSelector,\n            blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n          // Wrap text nodes in span for easier processing\n          t.$ed.contents().filter(function () {\n            return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n          }).wrap('<span data-tbw/>');\n\n          // Wrap groups of inline elements in paragraphs (recursive)\n          var wrapInlinesInParagraphsFrom = function ($from) {\n            if ($from.length !== 0) {\n              var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n              $finalParagraph.next('br').remove();\n              wrapInlinesInParagraphsFrom($nextElement);\n            }\n          };\n          wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n          t.semanticTag('div', true);\n\n          // Get rid of temporary span's\n          $('[data-tbw]', t.$ed).contents().unwrap();\n\n          // Remove empty <p>\n          t.$ed.find('p:empty').remove();\n        }\n        if (!keepRange && restoreRange) {\n          t.restoreRange();\n        }\n        t.syncTextarea();\n      }\n    },\n    semanticTag: function (oldTag, copyAttributes, revert) {\n      var newTag,\n        t = this;\n      var tmpTag = oldTag;\n      if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n        newTag = this.o.semantic[oldTag];\n      } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n        newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n      } else {\n        return;\n      }\n      if (revert) {\n        oldTag = newTag;\n        newTag = tmpTag;\n      }\n      $(oldTag, this.$ed).each(function () {\n        var resetRange = false;\n        var $oldTag = $(this);\n        if ($oldTag.contents().length === 0) {\n          return false;\n        }\n        if (t.range && t.range.startContainer.parentNode === this) {\n          resetRange = true;\n        }\n        var $newTag = $('<' + newTag + '/>');\n        $newTag.insertBefore($oldTag);\n        if (copyAttributes) {\n          $.each($oldTag.prop('attributes'), function () {\n            $newTag.attr(this.name, this.value);\n          });\n        }\n        $newTag.html($oldTag.html());\n        $oldTag.remove();\n        if (resetRange === true) {\n          t.range.selectNodeContents($newTag.get(0));\n          t.range.collapse(false);\n        }\n      });\n    },\n    // Function call when user click on \"Insert Link\"\n    createLink: function () {\n      var t = this,\n        documentSelection = t.doc.getSelection(),\n        selectedRange = documentSelection.getRangeAt(0),\n        node = documentSelection.focusNode,\n        text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n        url,\n        title,\n        target,\n        linkDefaultTarget = t.o.linkTargets[0];\n      while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n        node = node.parentNode;\n      }\n      if (node && node.nodeName === 'A') {\n        var $a = $(node);\n        text = $a.text();\n        url = $a.attr('href');\n        if (!t.o.minimalLinks) {\n          title = $a.attr('title');\n          target = $a.attr('target') || linkDefaultTarget;\n        }\n        var range = t.doc.createRange();\n        range.selectNode(node);\n        documentSelection.removeAllRanges();\n        documentSelection.addRange(range);\n      }\n      t.saveRange();\n      var options = {\n        url: {\n          label: t.lang.linkUrl || 'URL',\n          required: true,\n          value: url\n        },\n        text: {\n          label: t.lang.text,\n          value: text\n        }\n      };\n      if (!t.o.minimalLinks) {\n        var targetOptions = t.o.linkTargets.reduce(function (options, optionValue) {\n          options[optionValue] = t.lang[optionValue];\n          return options;\n        }, {});\n        $.extend(options, {\n          title: {\n            label: t.lang.title,\n            value: title\n          },\n          target: {\n            label: t.lang.target,\n            value: target,\n            options: targetOptions\n          }\n        });\n      }\n      t.openModalInsert(t.lang.createLink, options, function (v) {\n        // v is value\n        var url = t.prependUrlPrefix(v.url);\n        if (!url.length) {\n          return false;\n        }\n        var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n        if (v.title) {\n          link.attr('title', v.title);\n        }\n        if (v.target || linkDefaultTarget) {\n          link.attr('target', v.target || linkDefaultTarget);\n        }\n        t.range.deleteContents();\n        t.range.insertNode(link[0]);\n        t.syncCode();\n        t.$c.trigger('tbwchange');\n        return true;\n      });\n    },\n    prependUrlPrefix: function (url) {\n      var t = this;\n      if (!t.urlPrefix) {\n        return url;\n      }\n      var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n      if (VALID_LINK_PREFIX.test(url)) {\n        return url;\n      }\n      var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (SIMPLE_EMAIL_REGEX.test(url)) {\n        return 'mailto:' + url;\n      }\n      return t.urlPrefix + url;\n    },\n    unlink: function () {\n      var t = this,\n        documentSelection = t.doc.getSelection(),\n        node = documentSelection.focusNode;\n      if (documentSelection.isCollapsed) {\n        while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n          node = node.parentNode;\n        }\n        if (node && node.nodeName === 'A') {\n          var range = t.doc.createRange();\n          range.selectNode(node);\n          documentSelection.removeAllRanges();\n          documentSelection.addRange(range);\n        }\n      }\n      t.execCmd('unlink', undefined, undefined, true);\n    },\n    insertImage: function () {\n      var t = this;\n      t.saveRange();\n      var options = {\n        url: {\n          label: 'URL',\n          required: true\n        },\n        alt: {\n          label: t.lang.description,\n          value: t.getRangeText()\n        }\n      };\n      if (t.o.imageWidthModalEdit) {\n        options.width = {};\n      }\n      t.openModalInsert(t.lang.insertImage, options, function (v) {\n        // v are values\n        t.execCmd('insertImage', v.url, false, true);\n        var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n        $img.attr('alt', v.alt);\n        if (t.o.imageWidthModalEdit) {\n          $img.attr({\n            width: v.width\n          });\n        }\n        t.syncCode();\n        t.$c.trigger('tbwchange');\n        return true;\n      });\n    },\n    fullscreen: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        fullscreenCssClass = prefix + 'fullscreen',\n        fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n        isFullscreen,\n        editorHeight = t.$box.outerHeight();\n      t.$box.toggleClass(fullscreenCssClass);\n      isFullscreen = t.$box.hasClass(fullscreenCssClass);\n      if (isFullscreen) {\n        t.$box.before($('<div/>', {\n          class: fullscreenPlaceholderClass\n        }).css({\n          height: editorHeight\n        }));\n      } else {\n        $('.' + fullscreenPlaceholderClass).remove();\n      }\n      $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n      $(window).trigger('scroll');\n      t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n    },\n    /*\n     * Call method of trumbowyg if exist\n     * else try to call anonymous function\n     * and finally native execCommand\n     */\n    execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n      var t = this;\n      skipTrumbowyg = !!skipTrumbowyg || '';\n      if (cmd !== 'dropdown') {\n        t.$ed.focus();\n      }\n      if (cmd === 'strikethrough' && t.o.semantic) {\n        t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n      }\n\n      try {\n        t.doc.execCommand('styleWithCSS', false, forceCss || false);\n      } catch (c) {}\n      try {\n        t[cmd + skipTrumbowyg](param);\n      } catch (c) {\n        try {\n          cmd(param);\n        } catch (e2) {\n          if (cmd === 'insertHorizontalRule') {\n            param = undefined;\n          } else if (cmd === 'formatBlock' && t.isIE) {\n            param = '<' + param + '>';\n          }\n          t.doc.execCommand(cmd, false, param);\n          t.syncCode();\n          t.semanticCode(false, true);\n          try {\n            var listId = window.getSelection().focusNode;\n            if (!$(window.getSelection().focusNode.parentNode).hasClass('trumbowyg-editor')) {\n              listId = window.getSelection().focusNode.parentNode;\n            }\n            var classes = t.o.tagClasses[param];\n            if (classes) {\n              $(listId).addClass(classes);\n            }\n          } catch (e) {}\n        }\n        if (cmd !== 'dropdown') {\n          t.updateButtonPaneStatus();\n          t.$c.trigger('tbwchange');\n        }\n      }\n    },\n    // Open a modal box\n    openModal: function (title, content, buildForm) {\n      var t = this,\n        prefix = t.o.prefix;\n      buildForm = buildForm !== false;\n\n      // No open a modal box when exist other modal box\n      if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n        return false;\n      }\n      if (t.o.autogrowOnEnter) {\n        t.autogrowOnEnterDontClose = true;\n      }\n      t.saveRange();\n      t.showOverlay();\n\n      // Disable all btnPane btns\n      t.$btnPane.addClass(prefix + 'disable');\n\n      // Build out of ModalBox, it's the mask for animations\n      var $modal = $('<div/>', {\n        class: prefix + 'modal ' + prefix + 'fixed-top'\n      }).css({\n        top: t.$box.offset().top + t.$btnPane.height(),\n        zIndex: 99999\n      }).appendTo($(t.doc.body));\n      var darkClass = prefix + 'dark';\n      if (t.$c.parents('.' + darkClass).length !== 0) {\n        $modal.addClass(darkClass);\n      }\n\n      // Click on overlay close modal by cancelling them\n      t.$overlay.one('click', function () {\n        $modal.trigger(CANCEL_EVENT);\n        return false;\n      });\n\n      // Build the form\n      var formOrContent;\n      if (buildForm) {\n        formOrContent = $('<form/>', {\n          action: '',\n          html: content\n        }).on('submit', function () {\n          $modal.trigger(CONFIRM_EVENT);\n          return false;\n        }).on('reset', function () {\n          $modal.trigger(CANCEL_EVENT);\n          return false;\n        }).on('submit reset', function () {\n          if (t.o.autogrowOnEnter) {\n            t.autogrowOnEnterDontClose = false;\n          }\n        });\n      } else {\n        formOrContent = content;\n      }\n\n      // Build ModalBox and animate to show them\n      var $box = $('<div/>', {\n        class: prefix + 'modal-box',\n        html: formOrContent\n      }).css({\n        top: '-' + t.$btnPane.outerHeight(),\n        opacity: 0,\n        paddingBottom: buildForm ? null : '5%'\n      }).appendTo($modal).animate({\n        top: 0,\n        opacity: 1\n      }, 100);\n\n      // Append title\n      if (title) {\n        $('<span/>', {\n          text: title,\n          class: prefix + 'modal-title'\n        }).prependTo($box);\n      }\n      if (buildForm) {\n        // Focus in modal box\n        $(':input:first', $box).focus();\n\n        // Append Confirm and Cancel buttons\n        t.buildModalBtn('submit', $box);\n        t.buildModalBtn('reset', $box);\n        $modal.height($box.outerHeight() + 10);\n      }\n      $(window).trigger('scroll');\n      t.$c.trigger('tbwmodalopen');\n      return $modal;\n    },\n    // @param n is name of modal\n    buildModalBtn: function (n, $modal) {\n      var t = this,\n        prefix = t.o.prefix;\n      return $('<button/>', {\n        class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n        type: n,\n        text: t.lang[n] || n\n      }).appendTo($('form', $modal));\n    },\n    // close current modal box\n    closeModal: function () {\n      var t = this,\n        prefix = t.o.prefix;\n      t.$btnPane.removeClass(prefix + 'disable');\n      t.$overlay.off();\n\n      // Find the modal box\n      var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n      $modalBox.animate({\n        top: '-' + $modalBox.height()\n      }, 100, function () {\n        $modalBox.parent().remove();\n        t.hideOverlay();\n        t.$c.trigger('tbwmodalclose');\n      });\n      t.restoreRange();\n    },\n    // Pre-formatted build and management modal\n    openModalInsert: function (title, fields, cmd) {\n      var t = this,\n        prefix = t.o.prefix,\n        lg = t.lang,\n        html = '',\n        idPrefix = prefix + 'form-' + Date.now() + '-';\n      $.each(fields, function (fieldName, field) {\n        var l = field.label || fieldName,\n          n = field.name || fieldName,\n          a = field.attributes || {},\n          fieldId = idPrefix + fieldName;\n        var attr = Object.keys(a).map(function (prop) {\n          return prop + '=\"' + a[prop] + '\"';\n        }).join(' ');\n        if (typeof field.type === 'function') {\n          if (!field.name) {\n            field.name = n;\n          }\n          html += field.type(field, fieldId, prefix, lg);\n          return;\n        }\n        html += '<div class=\"' + prefix + 'input-row\">';\n        html += '<div class=\"' + prefix + 'input-infos\"><label for=\"' + fieldId + '\"><span>' + (lg[l] ? lg[l] : l) + '</span></label></div>';\n        html += '<div class=\"' + prefix + 'input-html\">';\n        if ($.isPlainObject(field.options)) {\n          html += '<select name=\"target\">';\n          html += Object.keys(field.options).map(optionValue => {\n            return '<option value=\"' + optionValue + '\" ' + (optionValue === field.value ? 'selected' : '') + '>' + field.options[optionValue] + '</option>';\n          }).join('');\n          html += '</select>';\n        } else {\n          html += '<input id=\"' + fieldId + '\" type=\"' + (field.type || 'text') + '\" name=\"' + n + '\" ' + attr;\n          html += (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : '') + ' value=\"' + (field.value || '').replace(/\"/g, '&quot;') + '\">';\n        }\n        html += '</div></div>';\n      });\n      return t.openModal(title, html).on(CONFIRM_EVENT, function () {\n        var $form = $('form', $(this)),\n          valid = true,\n          values = {};\n        $.each(fields, function (fieldName, field) {\n          var n = field.name || fieldName;\n          var $field = $(':input[name=\"' + n + '\"]', $form),\n            inputType = $field[0].type;\n          switch (inputType.toLowerCase()) {\n            case 'checkbox':\n              values[n] = $field.is(':checked');\n              break;\n            case 'radio':\n              values[n] = $field.filter(':checked').val();\n              break;\n            default:\n              values[n] = $.trim($field.val());\n              break;\n          }\n          // Validate value\n          if (field.required && values[n] === '') {\n            valid = false;\n            t.addErrorOnModalField($field, t.lang.required);\n          } else if (field.pattern && !field.pattern.test(values[n])) {\n            valid = false;\n            t.addErrorOnModalField($field, field.patternError);\n          }\n        });\n        if (valid) {\n          t.restoreRange();\n          if (cmd(values, fields)) {\n            t.syncCode();\n            t.$c.trigger('tbwchange');\n            t.closeModal();\n            $(this).off(CONFIRM_EVENT);\n          }\n        }\n      }).one(CANCEL_EVENT, function () {\n        $(this).off(CONFIRM_EVENT);\n        t.closeModal();\n      });\n    },\n    addErrorOnModalField: function ($field, err) {\n      var prefix = this.o.prefix,\n        spanErrorClass = prefix + 'msg-error',\n        $row = $field.closest('.' + prefix + 'input-row');\n      $field.on('change keyup', function () {\n        $row.removeClass(prefix + 'input-error');\n        setTimeout(function () {\n          $row.find('.' + spanErrorClass).remove();\n        }, 150);\n      });\n      $row.addClass(prefix + 'input-error').find('.' + prefix + 'input-infos label').append($('<span/>', {\n        class: spanErrorClass,\n        text: err\n      }));\n    },\n    getDefaultImgDblClickHandler: function () {\n      var t = this;\n      return function () {\n        var $img = $(this),\n          src = $img.attr('src'),\n          base64 = '(Base64)';\n        if (src.indexOf('data:image') === 0) {\n          src = base64;\n        }\n        var options = {\n          url: {\n            label: 'URL',\n            value: src,\n            required: true\n          },\n          alt: {\n            label: t.lang.description,\n            value: $img.attr('alt')\n          }\n        };\n        if (t.o.imageWidthModalEdit) {\n          options.width = {\n            value: $img.attr('width') ? $img.attr('width') : ''\n          };\n        }\n        t.openModalInsert(t.lang.insertImage, options, function (v) {\n          if (v.url !== base64) {\n            $img.attr({\n              src: v.url\n            });\n          }\n          $img.attr({\n            alt: v.alt\n          });\n          if (t.o.imageWidthModalEdit) {\n            if (parseInt(v.width) > 0) {\n              $img.attr({\n                width: v.width\n              });\n            } else {\n              $img.removeAttr('width');\n            }\n          }\n          return true;\n        });\n        return false;\n      };\n    },\n    // Range management\n    saveRange: function () {\n      var t = this,\n        documentSelection = t.doc.getSelection();\n      t.range = null;\n      if (!documentSelection || !documentSelection.rangeCount) {\n        return;\n      }\n      var savedRange = t.range = documentSelection.getRangeAt(0),\n        range = t.doc.createRange(),\n        rangeStart;\n      range.selectNodeContents(t.$ed[0]);\n      range.setEnd(savedRange.startContainer, savedRange.startOffset);\n      rangeStart = (range + '').length;\n      t.metaRange = {\n        start: rangeStart,\n        end: rangeStart + (savedRange + '').length\n      };\n    },\n    restoreRange: function () {\n      var t = this,\n        metaRange = t.metaRange,\n        savedRange = t.range,\n        documentSelection = t.doc.getSelection(),\n        range;\n      if (!savedRange) {\n        return;\n      }\n      if (metaRange && metaRange.start !== metaRange.end) {\n        // Algorithm from http://jsfiddle.net/WeWy7/3/\n        var charIndex = 0,\n          nodeStack = [t.$ed[0]],\n          node,\n          foundStart = false,\n          stop = false;\n        range = t.doc.createRange();\n        while (!stop && (node = nodeStack.pop())) {\n          if (node.nodeType === 3) {\n            var nextCharIndex = charIndex + node.length;\n            if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n              range.setStart(node, metaRange.start - charIndex);\n              foundStart = true;\n            }\n            if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n              range.setEnd(node, metaRange.end - charIndex);\n              stop = true;\n            }\n            charIndex = nextCharIndex;\n          } else {\n            var cn = node.childNodes,\n              i = cn.length;\n            while (i > 0) {\n              i -= 1;\n              nodeStack.push(cn[i]);\n            }\n          }\n        }\n      }\n\n      // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n      // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n      try {\n        documentSelection.removeAllRanges();\n      } catch (e) {}\n      documentSelection.addRange(range || savedRange);\n    },\n    getRangeText: function () {\n      return this.range + '';\n    },\n    clearButtonPaneStatus: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        activeClasses = prefix + 'active-button ' + prefix + 'active',\n        originalIconClass = prefix + 'original-icon';\n\n      // Reset all buttons and dropdown state\n      $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n      $('.' + originalIconClass, t.$btnPane).each(function () {\n        $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n      });\n    },\n    updateButtonPaneStatus: function () {\n      var t = this,\n        prefix = t.o.prefix,\n        activeClasses = prefix + 'active-button ' + prefix + 'active',\n        originalIconClass = prefix + 'original-icon',\n        tags = t.getTagsRecursive(t.doc.getSelection().focusNode);\n      t.clearButtonPaneStatus();\n      $.each(tags, function (i, tag) {\n        var btnName = t.tagToButton[tag.toLowerCase()],\n          $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n        if ($btn.length > 0) {\n          $btn.addClass(activeClasses);\n        } else {\n          try {\n            $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n            var $btnSvgUse = $btn.find('svg use'),\n              dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n              $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n              $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n            // Highlight the dropdown button\n            $dropdownBtn.addClass(activeClasses);\n\n            // Switch dropdown icon to the active sub-icon one\n            if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n              // Save original icon\n              $dropdownBtn.addClass(originalIconClass).data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n              // Put the active sub-button's icon\n              $dropdownBtnSvgUse.attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n            }\n          } catch (e) {}\n        }\n      });\n    },\n    getTagsRecursive: function (element, tags) {\n      var t = this;\n      tags = tags || (element && element.tagName ? [element.tagName] : []);\n      if (element && element.parentNode) {\n        element = element.parentNode;\n      } else {\n        return tags;\n      }\n      var tag = element.tagName;\n      if (tag === 'DIV') {\n        return tags;\n      }\n      if (tag === 'P' && element.style.textAlign !== '') {\n        tags.push(element.style.textAlign);\n      }\n      $.each(t.tagHandlers, function (i, tagHandler) {\n        tags = tags.concat(tagHandler(element, t));\n      });\n      tags.push(tag);\n      return t.getTagsRecursive(element, tags).filter(function (tag) {\n        return tag != null;\n      });\n    },\n    // Plugins\n    initPlugins: function () {\n      var t = this;\n      t.loadedPlugins = [];\n      $.each($.trumbowyg.plugins, function (name, plugin) {\n        if (!plugin.shouldInit || plugin.shouldInit(t)) {\n          plugin.init(t);\n          if (plugin.tagHandler) {\n            t.tagHandlers.push(plugin.tagHandler);\n          }\n          t.loadedPlugins.push(plugin);\n        }\n      });\n    },\n    destroyPlugins: function () {\n      var t = this;\n      $.each(this.loadedPlugins, function (i, plugin) {\n        if (plugin.destroy) {\n          plugin.destroy(t);\n        }\n      });\n    }\n  };\n})(navigator, window, document, jQuery);","map":{"version":3,"names":["jQuery","trumbowyg","langs","en","viewHTML","undo","redo","formatting","p","blockquote","code","header","bold","italic","strikethrough","underline","strong","em","del","superscript","subscript","unorderedList","orderedList","insertImage","link","createLink","unlink","_self","_blank","justifyLeft","justifyCenter","justifyRight","justifyFull","horizontalRule","removeformat","fullscreen","close","submit","reset","required","description","title","text","target","width","plugins","svgPath","svgAbsoluteUseHref","hideButtonTexts","Object","defineProperty","value","lang","fixedBtnPane","fixedFullWidth","autogrow","autogrowOnEnter","imageWidthModalEdit","prefix","tagClasses","semantic","semanticKeepAttributes","resetCss","removeformatPasted","tabToIndent","tagsToRemove","tagsToKeep","btns","btnsDef","changeActiveDropdownIcon","inlineElementsSelector","pasteHandlers","urlProtocol","minimalLinks","linkTargets","writable","enumerable","configurable","navigator","window","document","$","CONFIRM_EVENT","CANCEL_EVENT","fn","options","params","trumbowygDataName","each","data","Trumbowyg","length","t","execCmd","cmd","param","forceCss","skipTrumbowyg","openModal","content","closeModal","openModalInsert","fields","callback","saveRange","range","getRangeText","restoreRange","setDisabled","toggle","destroy","empty","html","c","editorElem","trumbowygIconsId","$trumbowyg","doc","ownerDocument","$ta","$c","extend","svgPathOption","hasSvg","$scriptElements","i","scriptElement","source","src","matches","match","substring","indexOf","console","warn","div","createElement","id","body","insertBefore","childNodes","ajax","async","type","contentType","dataType","crossDomain","url","beforeSend","complete","success","innerHTML","XMLSerializer","serializeToString","documentElement","baseHref","querySelector","location","href","replace","hash","h","isBlinkFunction","chrome","Intl","v8BreakIterator","class","isSupported","key","h1","h2","h3","h4","h5","h6","tag","dropdown","ico","o","defaultOptions","hasOwnProperty","imgDblClickHandler","getDefaultImgDblClickHandler","urlPrefix","setupUrlPrefix","disabled","nodeName","btnName","btnDef","addBtnDef","eventNamespace","keys","tagToButton","tagHandlers","concat","isIE","userAgent","appVersion","isMac","platform","toUpperCase","init","prototype","DEFAULT_SEMANTIC_MAP","height","initPlugins","execCommand","e","buildEditor","buildBtnPane","fixedBtnPaneEvents","buildOverlay","setTimeout","trigger","protocol","$box","isTextarea","is","val","$ed","insertAfter","append","name","attr","syncCode","addClass","contenteditable","dir","_dir","tabindex","add","css","semanticCode","ctrl","composition","debounceButtonPaneStatus","on","keyCode","which","toggleSpan","ctrlKey","metaKey","altKey","String","fromCharCode","shiftKey","compositionEndIE","clearTimeout","updateButtonPaneStatus","clearButtonPaneStatus","autogrowOnEnterDontClose","autogrowOnEnterWasFocused","autogrowEditorOnEnter","block","preventDefault","getSelection","deleteFromDocument","clipboardData","getData","selection","createRange","pasteHTML","getRangeAt","insertNode","createTextNode","d","originalEvent","pasteHandler","removeClass","oldHeight","clientHeight","totalHeight","scrollHeight","$btnPane","btnGrp","isArray","$btnGroup","btn","isSupportedBtn","buildBtn","trim","prepend","isDropdown","hasIcon","textDef","$btn","toLowerCase","mousedown","hasClass","dropdownPrefix","dropdownOptions","dropdownClass","$dropdown","def","buildSubBtn","hide","style","$overlay","appendTo","showOverlay","fadeIn","hideOverlay","fadeOut","isFixed","scrollTop","offset","top","$buttonPane","buttonPaneOuterHeight","outerHeight","position","left","zIndex","paddingTop","removeAttr","disable","toggleClass","after","show","off","destroyPlugins","remove","removeData","activeElement","blur","addFlag","find","contents","unwrap","$body","btnOffsetLeft","syncTextarea","join","force","safe","full","keepRange","collapsed","semanticTag","blockElementsSelector","filter","nodeType","nodeValue","wrap","wrapInlinesInParagraphsFrom","$from","$finalParagraph","nextUntil","addBack","wrapAll","parent","$nextElement","nextAll","first","next","children","oldTag","copyAttributes","revert","newTag","tmpTag","resetRange","$oldTag","startContainer","parentNode","$newTag","prop","selectNodeContents","get","collapse","documentSelection","selectedRange","node","focusNode","cloneContents","linkDefaultTarget","$a","selectNode","removeAllRanges","addRange","label","linkUrl","targetOptions","reduce","optionValue","v","prependUrlPrefix","deleteContents","VALID_LINK_PREFIX","test","SIMPLE_EMAIL_REGEX","isCollapsed","undefined","alt","$img","fullscreenCssClass","fullscreenPlaceholderClass","isFullscreen","editorHeight","before","focus","e2","listId","classes","buildForm","$modal","darkClass","parents","one","formOrContent","action","opacity","paddingBottom","animate","prependTo","buildModalBtn","n","$modalBox","lg","idPrefix","Date","now","fieldName","field","l","a","attributes","fieldId","map","isPlainObject","$form","valid","values","$field","inputType","addErrorOnModalField","pattern","patternError","err","spanErrorClass","$row","closest","base64","parseInt","rangeCount","savedRange","rangeStart","setEnd","startOffset","metaRange","start","end","charIndex","nodeStack","foundStart","stop","pop","nextCharIndex","setStart","cn","push","activeClasses","originalIconClass","tags","getTagsRecursive","$btnSvgUse","dropdownBtnName","$dropdownBtn","$dropdownBtnSvgUse","element","tagName","textAlign","tagHandler","loadedPlugins","plugin","shouldInit"],"sources":["/Users/khaled.el-moussa/Desktop/Projekter/Kal2/frontend/node_modules/trumbowyg/dist/trumbowyg.js"],"sourcesContent":["/**\n * Trumbowyg v2.26.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link http://alex-d.github.io/Trumbowyg\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n    langs: {\n        en: {\n            viewHTML: 'View HTML',\n\n            undo: 'Undo',\n            redo: 'Redo',\n\n            formatting: 'Formatting',\n            p: 'Paragraph',\n            blockquote: 'Quote',\n            code: 'Code',\n            header: 'Header',\n\n            bold: 'Bold',\n            italic: 'Italic',\n            strikethrough: 'Strikethrough',\n            underline: 'Underline',\n\n            strong: 'Strong',\n            em: 'Emphasis',\n            del: 'Deleted',\n\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n\n            unorderedList: 'Unordered list',\n            orderedList: 'Ordered list',\n\n            insertImage: 'Insert Image',\n            link: 'Link',\n            createLink: 'Insert link',\n            unlink: 'Remove link',\n\n            _self: 'Same tab (default)',\n            _blank: 'New tab',\n\n            justifyLeft: 'Align Left',\n            justifyCenter: 'Align Center',\n            justifyRight: 'Align Right',\n            justifyFull: 'Align Justify',\n\n            horizontalRule: 'Insert horizontal rule',\n            removeformat: 'Remove format',\n\n            fullscreen: 'Fullscreen',\n\n            close: 'Close',\n\n            submit: 'Confirm',\n            reset: 'Cancel',\n\n            required: 'Required',\n            description: 'Description',\n            title: 'Title',\n            text: 'Text',\n            target: 'Target',\n            width: 'Width'\n        }\n    },\n\n    // Plugins\n    plugins: {},\n\n    // SVG Path globally\n    svgPath: null,\n    svgAbsoluteUseHref: false,\n\n    hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n    value: {\n        lang: 'en',\n\n        fixedBtnPane: false,\n        fixedFullWidth: false,\n        autogrow: false,\n        autogrowOnEnter: false,\n        imageWidthModalEdit: false,\n        hideButtonTexts: null,\n\n        prefix: 'trumbowyg-',\n        tagClasses: {},\n        semantic: true,\n        semanticKeepAttributes: false,\n        resetCss: false,\n        removeformatPasted: false,\n        tabToIndent: false,\n        tagsToRemove: [],\n        tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n        btns: [\n            ['viewHTML'],\n            ['undo', 'redo'], // Only supported in Blink browsers\n            ['formatting'],\n            ['strong', 'em', 'del'],\n            ['superscript', 'subscript'],\n            ['link'],\n            ['insertImage'],\n            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            ['unorderedList', 'orderedList'],\n            ['horizontalRule'],\n            ['removeformat'],\n            ['fullscreen']\n        ],\n        // For custom button definitions\n        btnsDef: {},\n        changeActiveDropdownIcon: false,\n\n        inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n\n        pasteHandlers: [],\n\n        // imgDblClickHandler: default is defined in constructor\n\n        plugins: {},\n\n        urlProtocol: false,\n        minimalLinks: false,\n        linkTargets: ['_self', '_blank'],\n\n        svgPath: null\n    },\n    writable: false,\n    enumerable: true,\n    configurable: false\n});\n\n(function (navigator, window, document, $) {\n    'use strict';\n\n    var CONFIRM_EVENT = 'tbwconfirm',\n        CANCEL_EVENT = 'tbwcancel';\n\n    $.fn.trumbowyg = function (options, params) {\n        var trumbowygDataName = 'trumbowyg';\n        if (options === Object(options) || !options) {\n            return this.each(function () {\n                if (!$(this).data(trumbowygDataName)) {\n                    $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n                }\n            });\n        }\n        if (this.length === 1) {\n            try {\n                var t = $(this).data(trumbowygDataName);\n                switch (options) {\n                    // Exec command\n                    case 'execCmd':\n                        return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n                    // Modal box\n                    case 'openModal':\n                        return t.openModal(params.title, params.content);\n                    case 'closeModal':\n                        return t.closeModal();\n                    case 'openModalInsert':\n                        return t.openModalInsert(params.title, params.fields, params.callback);\n\n                    // Range\n                    case 'saveRange':\n                        return t.saveRange();\n                    case 'getRange':\n                        return t.range;\n                    case 'getRangeText':\n                        return t.getRangeText();\n                    case 'restoreRange':\n                        return t.restoreRange();\n\n                    // Enable/disable\n                    case 'enable':\n                        return t.setDisabled(false);\n                    case 'disable':\n                        return t.setDisabled(true);\n\n                    // Toggle\n                    case 'toggle':\n                        return t.toggle();\n\n                    // Destroy\n                    case 'destroy':\n                        return t.destroy();\n\n                    // Empty\n                    case 'empty':\n                        return t.empty();\n\n                    // HTML\n                    case 'html':\n                        return t.html(params);\n                }\n            } catch (c) {\n            }\n        }\n\n        return false;\n    };\n\n    // @param: editorElem is the DOM element\n    var Trumbowyg = function (editorElem, options) {\n        var t = this,\n            trumbowygIconsId = 'trumbowyg-icons',\n            $trumbowyg = $.trumbowyg;\n\n        // Get the document of the element. It use to makes the plugin\n        // compatible on iframes.\n        t.doc = editorElem.ownerDocument || document;\n\n        // jQuery object of the editor\n        t.$ta = $(editorElem); // $ta : Textarea\n        t.$c = $(editorElem); // $c : creator\n\n        options = options || {};\n\n        // Localization management\n        if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n            t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n        } else {\n            t.lang = $trumbowyg.langs.en;\n        }\n\n        t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n        // SVG path\n        var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n        t.hasSvg = svgPathOption !== false;\n\n        if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n            if (svgPathOption == null) {\n                // Hack to get svgPathOption based on trumbowyg.js path\n                var $scriptElements = $('script[src]');\n                $scriptElements.each(function (i, scriptElement) {\n                    var source = scriptElement.src;\n                    var matches = source.match('trumbowyg(\\.min)?\\.js');\n                    if (matches != null) {\n                        svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n                    }\n                });\n            }\n\n            // Do not merge with previous if block: svgPathOption can be redefined in it.\n            // Here we are checking that we find a match\n            if (svgPathOption == null) {\n                console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n            } else if (!$trumbowyg.svgAbsoluteUseHref) {\n                var div = t.doc.createElement('div');\n                div.id = trumbowygIconsId;\n                t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n                $.ajax({\n                    async: true,\n                    type: 'GET',\n                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                    dataType: 'xml',\n                    crossDomain: true,\n                    url: svgPathOption,\n                    data: null,\n                    beforeSend: null,\n                    complete: null,\n                    success: function (data) {\n                        div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\n                    }\n                });\n            }\n        }\n\n        var baseHref = !!t.doc.querySelector('base') ? window.location.href.replace(window.location.hash, '') : '';\n        t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n\n\n        /**\n         * When the button is associated to a empty object\n         * fn and title attributes are defined from the button key value\n         *\n         * For example\n         *      foo: {}\n         * is equivalent to :\n         *      foo: {\n         *          fn: 'foo',\n         *          title: this.lang.foo\n         *      }\n         */\n        var h = t.lang.header, // Header translation\n            isBlinkFunction = function () {\n                return (window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window;\n            };\n        t.btnsDef = {\n            viewHTML: {\n                fn: 'toggle',\n                class: 'trumbowyg-not-disable',\n            },\n\n            undo: {\n                isSupported: isBlinkFunction,\n                key: 'Z'\n            },\n            redo: {\n                isSupported: isBlinkFunction,\n                key: 'Y'\n            },\n\n            p: {\n                fn: 'formatBlock'\n            },\n            blockquote: {\n                fn: 'formatBlock'\n            },\n            h1: {\n                fn: 'formatBlock',\n                title: h + ' 1'\n            },\n            h2: {\n                fn: 'formatBlock',\n                title: h + ' 2'\n            },\n            h3: {\n                fn: 'formatBlock',\n                title: h + ' 3'\n            },\n            h4: {\n                fn: 'formatBlock',\n                title: h + ' 4'\n            },\n            h5: {\n                fn: 'formatBlock',\n                title: h + ' 5'\n            },\n            h6: {\n                fn: 'formatBlock',\n                title: h + ' 6'\n            },\n            subscript: {\n                tag: 'sub'\n            },\n            superscript: {\n                tag: 'sup'\n            },\n\n            bold: {\n                key: 'B',\n                tag: 'b'\n            },\n            italic: {\n                key: 'I',\n                tag: 'i'\n            },\n            underline: {\n                tag: 'u'\n            },\n            strikethrough: {\n                tag: 'strike'\n            },\n\n            strong: {\n                fn: 'bold',\n                key: 'B'\n            },\n            em: {\n                fn: 'italic',\n                key: 'I'\n            },\n            del: {\n                fn: 'strikethrough'\n            },\n\n            createLink: {\n                key: 'K',\n                tag: 'a'\n            },\n            unlink: {},\n\n            insertImage: {},\n\n            justifyLeft: {\n                tag: 'left',\n                forceCss: true\n            },\n            justifyCenter: {\n                tag: 'center',\n                forceCss: true\n            },\n            justifyRight: {\n                tag: 'right',\n                forceCss: true\n            },\n            justifyFull: {\n                tag: 'justify',\n                forceCss: true\n            },\n\n            unorderedList: {\n                fn: 'insertUnorderedList',\n                tag: 'ul'\n            },\n            orderedList: {\n                fn: 'insertOrderedList',\n                tag: 'ol'\n            },\n\n            horizontalRule: {\n                fn: 'insertHorizontalRule'\n            },\n\n            removeformat: {},\n\n            fullscreen: {\n                class: 'trumbowyg-not-disable'\n            },\n            close: {\n                fn: 'destroy',\n                class: 'trumbowyg-not-disable'\n            },\n\n            // Dropdowns\n            formatting: {\n                dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n                ico: 'p'\n            },\n            link: {\n                dropdown: ['createLink', 'unlink']\n            }\n        };\n\n        // Default Options\n        t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n        if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n            t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n        }\n\n        t.urlPrefix = t.setupUrlPrefix();\n\n        t.disabled = t.o.disabled || (editorElem.nodeName === 'TEXTAREA' && editorElem.disabled);\n\n        if (options.btns) {\n            t.o.btns = options.btns;\n        } else if (!t.o.semantic) {\n            t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n        }\n\n        $.each(t.o.btnsDef, function (btnName, btnDef) {\n            t.addBtnDef(btnName, btnDef);\n        });\n\n        // put this here in the event it would be merged in with options\n        t.eventNamespace = 'trumbowyg-event';\n\n        // Keyboard shortcuts are load in this array\n        t.keys = [];\n\n        // Tag to button dynamically hydrated\n        t.tagToButton = {};\n        t.tagHandlers = [];\n\n        // Admit multiple paste handlers\n        t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n        // Check if browser is IE\n        t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n        // Check if we are on macOs\n        t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n\n        t.init();\n    };\n\n    Trumbowyg.prototype = {\n        DEFAULT_SEMANTIC_MAP: {\n            'b': 'strong',\n            'i': 'em',\n            's': 'del',\n            'strike': 'del',\n            'div': 'p'\n        },\n\n        init: function () {\n            var t = this;\n            t.height = t.$ta.height();\n\n            t.initPlugins();\n\n            try {\n                // Disable image resize, try-catch for old IE\n                t.doc.execCommand('enableObjectResizing', false, false);\n                t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n            } catch (e) {\n            }\n\n            t.buildEditor();\n            t.buildBtnPane();\n\n            t.fixedBtnPaneEvents();\n\n            t.buildOverlay();\n\n            setTimeout(function () {\n                if (t.disabled) {\n                    t.setDisabled(true);\n                }\n                t.$c.trigger('tbwinit');\n            });\n        },\n\n        addBtnDef: function (btnName, btnDef) {\n            this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n        },\n\n        setupUrlPrefix: function () {\n            var protocol = this.o.urlProtocol;\n            if (!protocol) {\n                return;\n            }\n\n            if (typeof (protocol) !== 'string') {\n                return 'https://';\n            }\n            return protocol.replace('://', '') + '://';\n        },\n\n        buildEditor: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                html = '';\n\n            t.$box = $('<div/>', {\n                class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n            });\n\n            // $ta = Textarea\n            // $ed = Editor\n            t.isTextarea = t.$ta.is('textarea');\n            if (t.isTextarea) {\n                html = t.$ta.val();\n                t.$ed = $('<div/>');\n                t.$box\n                    .insertAfter(t.$ta)\n                    .append(t.$ed, t.$ta);\n            } else {\n                t.$ed = t.$ta;\n                html = t.$ed.html();\n\n                t.$ta = $('<textarea/>', {\n                    name: t.$ta.attr('id'),\n                    height: t.height\n                }).val(html);\n\n                t.$box\n                    .insertAfter(t.$ed)\n                    .append(t.$ta, t.$ed);\n                t.syncCode();\n            }\n\n            t.$ta\n                .addClass(prefix + 'textarea')\n                .attr('tabindex', -1)\n            ;\n\n            t.$ed\n                .addClass(prefix + 'editor')\n                .attr({\n                    contenteditable: true,\n                    dir: t.lang._dir || 'ltr'\n                })\n                .html(html)\n            ;\n\n            if (t.o.tabindex) {\n                t.$ed.attr('tabindex', t.o.tabindex);\n            }\n\n            if (t.$c.is('[placeholder]')) {\n                t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n            }\n\n            if (t.$c.is('[spellcheck]')) {\n                t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n            }\n\n            if (t.o.resetCss) {\n                t.$ed.addClass(prefix + 'reset-css');\n            }\n\n            if (!t.o.autogrow) {\n                t.$ta.add(t.$ed).css({\n                    height: t.height\n                });\n            }\n\n            t.semanticCode();\n\n            if (t.o.autogrowOnEnter) {\n                t.$ed.addClass(prefix + 'autogrow-on-enter');\n            }\n\n            var ctrl = false,\n                composition = false,\n                debounceButtonPaneStatus;\n\n            t.$ed\n                .on('dblclick', 'img', t.o.imgDblClickHandler)\n                .on('keydown', function (e) {\n                    // append flags to differentiate Chrome spans\n                    var keyCode = e.which;\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan(true);\n                    }\n                    if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                        ctrl = true;\n                        var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n\n                        try {\n                            t.execCmd(key.fn, key.param);\n                            return false;\n                        } catch (c) {\n                        }\n                    } else {\n                        if (t.o.tabToIndent && e.key === 'Tab') {\n                            try {\n                                if (e.shiftKey) {\n                                    t.execCmd('outdent', true, null);\n                                } else {\n                                    t.execCmd('indent', true, null);\n                                }\n                                return false;\n                            } catch (c) {\n                            }\n                        }\n                    }\n                })\n                .on('compositionstart compositionupdate', function () {\n                    composition = true;\n                })\n                .on('keyup compositionend', function (e) {\n                    if (e.type === 'compositionend') {\n                        composition = false;\n                    } else if (composition) {\n                        return;\n                    }\n\n                    var keyCode = e.which;\n\n                    if (keyCode >= 37 && keyCode <= 40) {\n                        return;\n                    }\n\n                    // remove Chrome generated span tags\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan();\n                    }\n\n                    if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    } else if (!ctrl && keyCode !== 17) {\n                        var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n                        t.semanticCode(false, compositionEndIE && keyCode === 13);\n                        t.$c.trigger('tbwchange');\n                    } else if (typeof e.which === 'undefined') {\n                        t.semanticCode(false, false, true);\n                    }\n\n                    setTimeout(function () {\n                        ctrl = false;\n                    }, 50);\n                })\n                .on('mouseup keydown keyup', function (e) {\n                    if ((!e.ctrlKey && !e.metaKey) || e.altKey) {\n                        setTimeout(function () { // \"hold on\" to the ctrl key for 50ms\n                            ctrl = false;\n                        }, 50);\n                    }\n                    clearTimeout(debounceButtonPaneStatus);\n                    debounceButtonPaneStatus = setTimeout(function () {\n                        t.updateButtonPaneStatus();\n                    }, 50);\n                })\n                .on('focus blur', function (e) {\n                    if (e.type === 'blur') {\n                        t.clearButtonPaneStatus();\n                    }\n                    t.$c.trigger('tbw' + e.type);\n                    if (t.o.autogrowOnEnter) {\n                        if (t.autogrowOnEnterDontClose) {\n                            return;\n                        }\n                        if (e.type === 'focus') {\n                            t.autogrowOnEnterWasFocused = true;\n                            t.autogrowEditorOnEnter();\n                        } else if (!t.o.autogrow) {\n                            t.$ed.css({height: t.$ed.css('min-height')});\n                            t.$c.trigger('tbwresize');\n                        }\n                    }\n                })\n                .on('keyup focus', function () {\n                  if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n                        setTimeout(function () {\n                            var block = t.isIE ? '<p>' : 'p';\n                            t.doc.execCommand('formatBlock', false, block);\n                            t.syncCode();\n                        }, 0);\n                    }\n                })\n                .on('cut drop', function () {\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                })\n                .on('paste', function (e) {\n                    if (t.o.removeformatPasted) {\n                        e.preventDefault();\n\n                        if (window.getSelection && window.getSelection().deleteFromDocument) {\n                            window.getSelection().deleteFromDocument();\n                        }\n\n                        try {\n                            // IE\n                            var text = window.clipboardData.getData('Text');\n\n                            try {\n                                // <= IE10\n                                t.doc.selection.createRange().pasteHTML(text);\n                            } catch (c) {\n                                // IE 11\n                                t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n                            }\n                            t.$c.trigger('tbwchange', e);\n                        } catch (d) {\n                            // Not IE\n                            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n                        }\n                    }\n\n                    // Call pasteHandlers\n                    $.each(t.pasteHandlers, function (i, pasteHandler) {\n                        pasteHandler(e);\n                    });\n\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwpaste', e);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            t.$ta\n                .on('keyup', function () {\n                    t.$c.trigger('tbwchange');\n                })\n                .on('paste', function () {\n                    setTimeout(function () {\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n                if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n                    t.closeModal();\n                    return false;\n                }\n            });\n        },\n\n        //autogrow when entering logic\n        autogrowEditorOnEnter: function () {\n            var t = this;\n            t.$ed.removeClass('autogrow-on-enter');\n            var oldHeight = t.$ed[0].clientHeight;\n            t.$ed.height('auto');\n            var totalHeight = t.$ed[0].scrollHeight;\n            t.$ed.addClass('autogrow-on-enter');\n            if (oldHeight !== totalHeight) {\n                t.$ed.height(oldHeight);\n                setTimeout(function () {\n                    t.$ed.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }, 0);\n            }\n        },\n\n\n        // Build button pane, use o.btns option\n        buildBtnPane: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            var $btnPane = t.$btnPane = $('<div/>', {\n                class: prefix + 'button-pane'\n            });\n\n            $.each(t.o.btns, function (i, btnGrp) {\n                if (!$.isArray(btnGrp)) {\n                    btnGrp = [btnGrp];\n                }\n\n                var $btnGroup = $('<div/>', {\n                    class: prefix + 'button-group ' + ((btnGrp.indexOf('fullscreen') >= 0) ? prefix + 'right' : '')\n                });\n                $.each(btnGrp, function (i, btn) {\n                    try { // Prevent buildBtn error\n                        if (t.isSupportedBtn(btn)) { // It's a supported button\n                            $btnGroup.append(t.buildBtn(btn));\n                        }\n                    } catch (c) {\n                    }\n                });\n\n                if ($btnGroup.html().trim().length > 0) {\n                    $btnPane.append($btnGroup);\n                }\n            });\n\n            t.$box.prepend($btnPane);\n        },\n\n\n        // Build a button and his action\n        buildBtn: function (btnName) { // btnName is name of the button\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                isDropdown = btn.dropdown,\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n                textDef = t.lang[btnName] || btnName,\n\n                $btn = $('<button/>', {\n                    type: 'button',\n                    class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n                    html: t.hasSvg && hasIcon ?\n                        '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' :\n                        t.hideButtonTexts ? '' : (btn.text || btn.title || t.lang[btnName] || btnName),\n                    title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n                    tabindex: -1,\n                    mousedown: function () {\n                        if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n                            $('body', t.doc).trigger('mousedown');\n                        }\n\n                        if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) &&\n                            !$(this).hasClass(prefix + 'active') &&\n                            !$(this).hasClass(prefix + 'not-disable')) {\n                            return false;\n                        }\n\n                        t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                        return false;\n                    }\n                });\n\n            if (isDropdown) {\n                $btn.addClass(prefix + 'open-dropdown');\n                var dropdownPrefix = prefix + 'dropdown',\n                    dropdownOptions = { // the dropdown\n                        class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n                    };\n                dropdownOptions['data-' + dropdownPrefix] = btnName;\n                var $dropdown = $('<div/>', dropdownOptions);\n                $.each(isDropdown, function (i, def) {\n                    if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n                        $dropdown.append(t.buildSubBtn(def));\n                    }\n                });\n                t.$box.append($dropdown.hide());\n            } else if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            if (!isDropdown) {\n                t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            }\n\n            return $btn;\n        },\n        // Build a button for dropdown menu\n        // @param n : name of the subbutton\n        buildSubBtn: function (btnName) {\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n\n            if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n\n            return $('<button/>', {\n                type: 'button',\n                class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n                html: t.hasSvg && hasIcon ?\n                    '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) :\n                    (btn.text || btn.title || t.lang[btnName] || btnName),\n                title: (btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null),\n                style: btn.style || null,\n                mousedown: function () {\n                    $('body', t.doc).trigger('mousedown');\n\n                    t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                    return false;\n                }\n            });\n        },\n        // Check if button is supported\n        isSupportedBtn: function (btnName) {\n            try {\n                return this.btnsDef[btnName].isSupported();\n            } catch (e) {\n            }\n            return true;\n        },\n\n        // Build overlay for modal box\n        buildOverlay: function () {\n            var t = this;\n            t.$overlay = $('<div/>', {\n                class: t.o.prefix + 'overlay'\n            }).appendTo(t.$box);\n            return t.$overlay;\n        },\n        showOverlay: function () {\n            var t = this;\n            $(window).trigger('scroll');\n            t.$overlay.fadeIn(200);\n            t.$box.addClass(t.o.prefix + 'box-blur');\n        },\n        hideOverlay: function () {\n            var t = this;\n            t.$overlay.fadeOut(50);\n            t.$box.removeClass(t.o.prefix + 'box-blur');\n        },\n\n        // Management of fixed button pane\n        fixedBtnPaneEvents: function () {\n            var t = this,\n                fixedFullWidth = t.o.fixedFullWidth,\n                $box = t.$box;\n\n            if (!t.o.fixedBtnPane) {\n                return;\n            }\n\n            t.isFixed = false;\n\n            $(window)\n                .on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n                    if (!$box) {\n                        return;\n                    }\n\n                    t.syncCode();\n\n                    var scrollTop = $(window).scrollTop(),\n                        offset = $box.offset().top + 1,\n                        $buttonPane = t.$btnPane,\n                        buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n\n                    if ((scrollTop - offset > 0) && ((scrollTop - offset - t.height) < 0)) {\n                        if (!t.isFixed) {\n                            t.isFixed = true;\n                            $buttonPane.css({\n                                position: 'fixed',\n                                top: 0,\n                                left: fixedFullWidth ? 0 : 'auto',\n                                zIndex: 7\n                            });\n                            t.$box.css({paddingTop: $buttonPane.height()});\n                        }\n                        $buttonPane.css({\n                            width: fixedFullWidth ? '100%' : (($box.width() - 1))\n                        });\n\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: fixedFullWidth ? 'fixed' : 'absolute',\n                            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n                            zIndex: 15\n                        });\n                    } else if (t.isFixed) {\n                        t.isFixed = false;\n                        $buttonPane.removeAttr('style');\n                        t.$box.css({paddingTop: 0});\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: 'absolute',\n                            top: buttonPaneOuterHeight\n                        });\n                    }\n                });\n        },\n\n        // Disable editor\n        setDisabled: function (disable) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.disabled = disable;\n\n            if (disable) {\n                t.$ta.attr('disabled', true);\n            } else {\n                t.$ta.removeAttr('disabled');\n            }\n            t.$box.toggleClass(prefix + 'disabled', disable);\n            t.$ed.attr('contenteditable', !disable);\n        },\n\n        // Destroy the editor\n        destroy: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.isTextarea) {\n                t.$box.after(\n                    t.$ta\n                        .css({height: ''})\n                        .val(t.html())\n                        .removeClass(prefix + 'textarea')\n                        .show()\n                );\n            } else {\n                t.$box.after(\n                    t.$ed\n                        .css({height: ''})\n                        .removeClass(prefix + 'editor')\n                        .removeAttr('contenteditable')\n                        .removeAttr('dir')\n                        .html(t.html())\n                        .show()\n                );\n            }\n\n            t.$ed.off('dblclick', 'img');\n\n            t.destroyPlugins();\n\n            t.$box.remove();\n            t.$c.removeData('trumbowyg');\n            $('body').removeClass(prefix + 'body-fullscreen');\n            t.$c.trigger('tbwclose');\n            $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n            $(t.doc.body).off('keydown.' + t.eventNamespace);\n        },\n\n\n        // Empty the editor\n        empty: function () {\n            this.$ta.val('');\n            this.syncCode(true);\n        },\n\n\n        // Function call when click on viewHTML button\n        toggle: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n            }\n\n            t.semanticCode(false, true);\n            t.$c.trigger('tbwchange');\n\n            setTimeout(function () {\n                t.doc.activeElement.blur();\n                t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                t.$btnPane.toggleClass(prefix + 'disable');\n                $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n                if (t.$box.hasClass(prefix + 'editor-visible')) {\n                    t.$ta.attr('tabindex', -1);\n                } else {\n                    t.$ta.removeAttr('tabindex');\n                }\n\n                if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n                    t.autogrowEditorOnEnter();\n                }\n            }, 0);\n        },\n\n        // Remove or add flags to span tags to remove Chrome generated spans\n        toggleSpan: function (addFlag) {\n            var t = this;\n            t.$ed.find('span').each(function () {\n                if (addFlag === true) {\n                    $(this).attr('data-tbw-flag', true);\n                } else {\n                    if ($(this).attr('data-tbw-flag')) {\n                        $(this).removeAttr('data-tbw-flag');\n                    } else {\n                        $(this).contents().unwrap();\n                    }\n                }\n            });\n        },\n\n        // Open dropdown when click on a button which open that\n        dropdown: function (name) {\n            var t = this,\n                $body = $('body', t.doc),\n                prefix = t.o.prefix,\n                $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n                $btn = $('.' + prefix + name + '-button', t.$btnPane),\n                show = $dropdown.is(':hidden');\n\n            $body.trigger('mousedown');\n\n            if (show) {\n                var btnOffsetLeft = $btn.offset().left;\n                $btn.addClass(prefix + 'active');\n\n                $dropdown.css({\n                    position: 'absolute',\n                    top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n                    left: (t.o.fixedFullWidth && t.isFixed) ? btnOffsetLeft : (btnOffsetLeft - t.$btnPane.offset().left)\n                }).show();\n\n                $(window).trigger('scroll');\n\n                $body.on('mousedown.' + t.eventNamespace, function (e) {\n                    if (!$dropdown.is(e.target)) {\n                        $('.' + prefix + 'dropdown', t.$box).hide();\n                        $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n                        $body.off('mousedown.' + t.eventNamespace);\n                    }\n                });\n            }\n        },\n\n\n        // HTML Code management\n        html: function (html) {\n            var t = this;\n\n            if (html != null) {\n                t.$ta.val(html);\n                t.syncCode(true);\n                t.$c.trigger('tbwchange');\n                return t;\n            }\n\n            return t.$ta.val();\n        },\n        syncTextarea: function () {\n            var t = this;\n            t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n        },\n        syncCode: function (force) {\n            var t = this;\n            if (!force && t.$ed.is(':visible')) {\n                t.syncTextarea();\n            } else {\n                // wrap the content in a div it's easier to get the inner html\n                var html = $('<div>').html(t.$ta.val());\n                // scrub the html before loading into the doc\n                var safe = $('<div>').append(html);\n                $(t.o.tagsToRemove.join(','), safe).remove();\n                t.$ed.html(safe.contents().html());\n            }\n\n            if (t.o.autogrow) {\n                t.height = t.$ed.height();\n                if (t.height !== t.$ta.css('height')) {\n                    t.$ta.css({height: t.height});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n            if (t.o.autogrowOnEnter) {\n                t.$ed.height('auto');\n                var totalHeight = t.autogrowOnEnterWasFocused ? t.$ed[0].scrollHeight : t.$ed.css('min-height');\n                if (totalHeight !== t.$ta.css('height')) {\n                    t.$ed.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n        },\n\n        // Analyse and update to semantic code\n        // @param force : force to sync code from textarea\n        // @param full  : wrap text nodes in <p>\n        // @param keepRange  : leave selection range as it is\n        semanticCode: function (force, full, keepRange) {\n            var t = this;\n            t.saveRange();\n            t.syncCode(force);\n\n            var restoreRange = true;\n            if (t.range && t.range.collapsed) {\n                restoreRange = false;\n            }\n\n            if (t.o.semantic) {\n                t.semanticTag('b', t.o.semanticKeepAttributes);\n                t.semanticTag('i', t.o.semanticKeepAttributes);\n                t.semanticTag('s', t.o.semanticKeepAttributes);\n                t.semanticTag('strike', t.o.semanticKeepAttributes);\n\n                if (full) {\n                    var inlineElementsSelector = t.o.inlineElementsSelector,\n                        blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n                    // Wrap text nodes in span for easier processing\n                    t.$ed.contents().filter(function () {\n                        return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n                    }).wrap('<span data-tbw/>');\n\n                    // Wrap groups of inline elements in paragraphs (recursive)\n                    var wrapInlinesInParagraphsFrom = function ($from) {\n                        if ($from.length !== 0) {\n                            var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n                            $finalParagraph.next('br').remove();\n                            wrapInlinesInParagraphsFrom($nextElement);\n                        }\n                    };\n                    wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n\n                    t.semanticTag('div', true);\n\n                    // Get rid of temporary span's\n                    $('[data-tbw]', t.$ed).contents().unwrap();\n\n                    // Remove empty <p>\n                    t.$ed.find('p:empty').remove();\n                }\n\n                if (!keepRange && restoreRange) {\n                    t.restoreRange();\n                }\n\n                t.syncTextarea();\n            }\n        },\n\n        semanticTag: function (oldTag, copyAttributes, revert) {\n            var newTag, t = this;\n            var tmpTag = oldTag;\n\n            if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n                newTag = this.o.semantic[oldTag];\n            } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n                newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n            } else {\n                return;\n            }\n\n            if(revert) {\n                oldTag = newTag;\n                newTag = tmpTag;\n            }\n\n            $(oldTag, this.$ed).each(function () {\n                var resetRange = false;\n                var $oldTag = $(this);\n                if ($oldTag.contents().length === 0) {\n                    return false;\n                }\n\n                if (t.range && t.range.startContainer.parentNode === this) {\n                    resetRange = true;\n                }\n                var $newTag = $('<' + newTag + '/>');\n                $newTag.insertBefore($oldTag);\n                if (copyAttributes) {\n                    $.each($oldTag.prop('attributes'), function () {\n                        $newTag.attr(this.name, this.value);\n                    });\n                }\n                $newTag.html($oldTag.html());\n                $oldTag.remove();\n                if(resetRange === true) {\n                    t.range.selectNodeContents($newTag.get(0));\n                    t.range.collapse(false);\n                }\n            });\n        },\n\n        // Function call when user click on \"Insert Link\"\n        createLink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                selectedRange = documentSelection.getRangeAt(0),\n                node = documentSelection.focusNode,\n                text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n                url,\n                title,\n                target,\n                linkDefaultTarget = t.o.linkTargets[0];\n\n            while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                node = node.parentNode;\n            }\n\n            if (node && node.nodeName === 'A') {\n                var $a = $(node);\n                text = $a.text();\n                url = $a.attr('href');\n                if (!t.o.minimalLinks) {\n                    title = $a.attr('title');\n                    target = $a.attr('target') || linkDefaultTarget;\n                }\n                var range = t.doc.createRange();\n                range.selectNode(node);\n                documentSelection.removeAllRanges();\n                documentSelection.addRange(range);\n            }\n\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: t.lang.linkUrl || 'URL',\n                    required: true,\n                    value: url\n                },\n                text: {\n                    label: t.lang.text,\n                    value: text\n                }\n            };\n            if (!t.o.minimalLinks) {\n                var targetOptions = t.o.linkTargets.reduce(function (options, optionValue) {\n                    options[optionValue] = t.lang[optionValue];\n\n                    return options;\n                }, {});\n\n                $.extend(options, {\n                    title: {\n                        label: t.lang.title,\n                        value: title\n                    },\n                    target: {\n                        label: t.lang.target,\n                        value: target,\n                        options: targetOptions\n                    }\n                });\n            }\n\n            t.openModalInsert(t.lang.createLink, options, function (v) { // v is value\n                var url = t.prependUrlPrefix(v.url);\n                if (!url.length) {\n                    return false;\n                }\n\n                var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n\n                if (v.title) {\n                    link.attr('title', v.title);\n                }\n                if (v.target || linkDefaultTarget) {\n                    link.attr('target', v.target || linkDefaultTarget);\n                }\n                t.range.deleteContents();\n                t.range.insertNode(link[0]);\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        prependUrlPrefix: function (url) {\n            var t = this;\n            if (!t.urlPrefix) {\n                return url;\n            }\n\n            var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n            if (VALID_LINK_PREFIX.test(url)) {\n                return url;\n            }\n\n            var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (SIMPLE_EMAIL_REGEX.test(url)) {\n                return 'mailto:' + url;\n            }\n\n            return t.urlPrefix + url;\n        },\n        unlink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                node = documentSelection.focusNode;\n\n            if (documentSelection.isCollapsed) {\n                while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                    node = node.parentNode;\n                }\n\n                if (node && node.nodeName === 'A') {\n                    var range = t.doc.createRange();\n                    range.selectNode(node);\n                    documentSelection.removeAllRanges();\n                    documentSelection.addRange(range);\n                }\n            }\n            t.execCmd('unlink', undefined, undefined, true);\n        },\n        insertImage: function () {\n            var t = this;\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true\n                },\n                alt: {\n                    label: t.lang.description,\n                    value: t.getRangeText()\n                }\n            };\n\n            if (t.o.imageWidthModalEdit) {\n                options.width = {};\n            }\n\n            t.openModalInsert(t.lang.insertImage, options, function (v) { // v are values\n                t.execCmd('insertImage', v.url, false, true);\n                var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n                $img.attr('alt', v.alt);\n\n                if (t.o.imageWidthModalEdit) {\n                    $img.attr({\n                        width: v.width\n                    });\n                }\n\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n\n                return true;\n            });\n        },\n        fullscreen: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                fullscreenCssClass = prefix + 'fullscreen',\n                fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n                isFullscreen,\n                editorHeight = t.$box.outerHeight();\n\n            t.$box.toggleClass(fullscreenCssClass);\n            isFullscreen = t.$box.hasClass(fullscreenCssClass);\n\n            if (isFullscreen) {\n                t.$box.before(\n                    $('<div/>', {\n                        class: fullscreenPlaceholderClass\n                    }).css({\n                        height: editorHeight\n                    })\n                );\n            } else {\n                $('.' + fullscreenPlaceholderClass).remove();\n            }\n\n            $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n            $(window).trigger('scroll');\n            t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n        },\n\n\n        /*\n         * Call method of trumbowyg if exist\n         * else try to call anonymous function\n         * and finally native execCommand\n         */\n        execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n            var t = this;\n            skipTrumbowyg = !!skipTrumbowyg || '';\n\n            if (cmd !== 'dropdown') {\n                t.$ed.focus();\n            }\n\n            if(cmd === 'strikethrough' && t.o.semantic) {\n                t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n            }\n\n            try {\n                t.doc.execCommand('styleWithCSS', false, forceCss || false);\n            } catch (c) {\n            }\n\n            try {\n                t[cmd + skipTrumbowyg](param);\n            } catch (c) {\n                try {\n                    cmd(param);\n                } catch (e2) {\n                    if (cmd === 'insertHorizontalRule') {\n                        param = undefined;\n                    } else if (cmd === 'formatBlock' && t.isIE) {\n                        param = '<' + param + '>';\n                    }\n\n                    t.doc.execCommand(cmd, false, param);\n\n                    t.syncCode();\n                    t.semanticCode(false, true);\n                    try {\n                        var listId = window.getSelection().focusNode;\n                        if(!$(window.getSelection().focusNode.parentNode).hasClass('trumbowyg-editor')){\n                            listId = window.getSelection().focusNode.parentNode;\n                        }\n                        var classes = t.o.tagClasses[param];\n                        if (classes) {\n                            $(listId).addClass(classes);\n                        }\n                    } catch (e) {\n\n                    }\n\n                }\n\n                if (cmd !== 'dropdown') {\n                    t.updateButtonPaneStatus();\n                    t.$c.trigger('tbwchange');\n                }\n            }\n        },\n\n\n        // Open a modal box\n        openModal: function (title, content, buildForm) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            buildForm = buildForm !== false;\n\n            // No open a modal box when exist other modal box\n            if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n                return false;\n            }\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = true;\n            }\n\n            t.saveRange();\n            t.showOverlay();\n\n            // Disable all btnPane btns\n            t.$btnPane.addClass(prefix + 'disable');\n\n            // Build out of ModalBox, it's the mask for animations\n            var $modal = $('<div/>', {\n                class: prefix + 'modal ' + prefix + 'fixed-top'\n            }).css({\n                top: t.$box.offset().top + t.$btnPane.height(),\n                zIndex: 99999\n            }).appendTo($(t.doc.body));\n\n            var darkClass = prefix + 'dark';\n            if (t.$c.parents('.' + darkClass).length !== 0) {\n                $modal.addClass(darkClass);\n            }\n\n            // Click on overlay close modal by cancelling them\n            t.$overlay.one('click', function () {\n                $modal.trigger(CANCEL_EVENT);\n                return false;\n            });\n\n            // Build the form\n            var formOrContent;\n            if (buildForm) {\n                formOrContent = $('<form/>', {\n                    action: '',\n                    html: content\n                })\n                    .on('submit', function () {\n                        $modal.trigger(CONFIRM_EVENT);\n                        return false;\n                    })\n                    .on('reset', function () {\n                        $modal.trigger(CANCEL_EVENT);\n                        return false;\n                    })\n                    .on('submit reset', function () {\n                        if (t.o.autogrowOnEnter) {\n                            t.autogrowOnEnterDontClose = false;\n                        }\n                    });\n            } else {\n                formOrContent = content;\n            }\n\n\n            // Build ModalBox and animate to show them\n            var $box = $('<div/>', {\n                class: prefix + 'modal-box',\n                html: formOrContent\n            })\n                .css({\n                    top: '-' + t.$btnPane.outerHeight(),\n                    opacity: 0,\n                    paddingBottom: buildForm ? null : '5%',\n                })\n                .appendTo($modal)\n                .animate({\n                    top: 0,\n                    opacity: 1\n                }, 100);\n\n\n            // Append title\n            if (title) {\n                $('<span/>', {\n                    text: title,\n                    class: prefix + 'modal-title'\n                }).prependTo($box);\n            }\n\n            if (buildForm) {\n                // Focus in modal box\n                $(':input:first', $box).focus();\n\n                // Append Confirm and Cancel buttons\n                t.buildModalBtn('submit', $box);\n                t.buildModalBtn('reset', $box);\n\n                $modal.height($box.outerHeight() + 10);\n            }\n\n            $(window).trigger('scroll');\n            t.$c.trigger('tbwmodalopen');\n\n            return $modal;\n        },\n        // @param n is name of modal\n        buildModalBtn: function (n, $modal) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            return $('<button/>', {\n                class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n                type: n,\n                text: t.lang[n] || n\n            }).appendTo($('form', $modal));\n        },\n        // close current modal box\n        closeModal: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.$btnPane.removeClass(prefix + 'disable');\n            t.$overlay.off();\n\n            // Find the modal box\n            var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n\n            $modalBox.animate({\n                top: '-' + $modalBox.height()\n            }, 100, function () {\n                $modalBox.parent().remove();\n                t.hideOverlay();\n                t.$c.trigger('tbwmodalclose');\n            });\n\n            t.restoreRange();\n        },\n        // Pre-formatted build and management modal\n        openModalInsert: function (title, fields, cmd) {\n            var t = this,\n                prefix = t.o.prefix,\n                lg = t.lang,\n                html = '',\n                idPrefix = prefix + 'form-' + Date.now() + '-';\n\n            $.each(fields, function (fieldName, field) {\n                var l = field.label || fieldName,\n                    n = field.name || fieldName,\n                    a = field.attributes || {},\n                    fieldId = idPrefix + fieldName;\n\n                var attr = Object.keys(a).map(function (prop) {\n                    return prop + '=\"' + a[prop] + '\"';\n                }).join(' ');\n\n                if (typeof field.type === 'function') {\n                  if (!field.name) {\n                    field.name = n;\n                  }\n\n                  html += field.type(field, fieldId, prefix, lg);\n\n                  return;\n                }\n\n                html += '<div class=\"' + prefix + 'input-row\">';\n                html += '<div class=\"' + prefix + 'input-infos\"><label for=\"' + fieldId + '\"><span>' + (lg[l] ? lg[l] : l) + '</span></label></div>';\n                html += '<div class=\"' + prefix + 'input-html\">';\n\n                if ($.isPlainObject(field.options)) {\n                    html += '<select name=\"target\">';\n                    html += Object.keys(field.options).map((optionValue) => {\n                        return '<option value=\"' + optionValue + '\" ' + (optionValue === field.value ? 'selected' : '') + '>' + field.options[optionValue] + '</option>';\n                    }).join('');\n                    html += '</select>';\n                } else {\n                    html += '<input id=\"' + fieldId + '\" type=\"' + (field.type || 'text') + '\" name=\"' + n + '\" ' + attr;\n                    html += (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : '') + ' value=\"' + (field.value || '').replace(/\"/g, '&quot;') + '\">';\n                }\n\n                html += '</div></div>';\n            });\n\n            return t.openModal(title, html)\n                .on(CONFIRM_EVENT, function () {\n                    var $form = $('form', $(this)),\n                        valid = true,\n                        values = {};\n\n                    $.each(fields, function (fieldName, field) {\n                        var n = field.name || fieldName;\n\n                        var $field = $(':input[name=\"' + n + '\"]', $form),\n                            inputType = $field[0].type;\n\n                        switch (inputType.toLowerCase()) {\n                            case 'checkbox':\n                                values[n] = $field.is(':checked');\n                                break;\n                            case 'radio':\n                                values[n] = $field.filter(':checked').val();\n                                break;\n                            default:\n                                values[n] = $.trim($field.val());\n                                break;\n                        }\n                        // Validate value\n                        if (field.required && values[n] === '') {\n                            valid = false;\n                            t.addErrorOnModalField($field, t.lang.required);\n                        } else if (field.pattern && !field.pattern.test(values[n])) {\n                            valid = false;\n                            t.addErrorOnModalField($field, field.patternError);\n                        }\n                    });\n\n                    if (valid) {\n                        t.restoreRange();\n\n                        if (cmd(values, fields)) {\n                            t.syncCode();\n                            t.$c.trigger('tbwchange');\n                            t.closeModal();\n                            $(this).off(CONFIRM_EVENT);\n                        }\n                    }\n                })\n                .one(CANCEL_EVENT, function () {\n                    $(this).off(CONFIRM_EVENT);\n                    t.closeModal();\n                });\n        },\n        addErrorOnModalField: function ($field, err) {\n            var prefix = this.o.prefix,\n                spanErrorClass = prefix + 'msg-error',\n                $row = $field.closest('.' + prefix + 'input-row');\n\n            $field\n                .on('change keyup', function () {\n                    $row.removeClass(prefix + 'input-error');\n                    setTimeout(function () {\n                        $row.find('.' + spanErrorClass).remove();\n                    }, 150);\n                });\n\n            $row\n                .addClass(prefix + 'input-error')\n                .find('.' + prefix + 'input-infos label')\n                .append(\n                    $('<span/>', {\n                        class: spanErrorClass,\n                        text: err\n                    })\n                );\n        },\n\n        getDefaultImgDblClickHandler: function () {\n            var t = this;\n\n            return function () {\n                var $img = $(this),\n                    src = $img.attr('src'),\n                    base64 = '(Base64)';\n\n                if (src.indexOf('data:image') === 0) {\n                    src = base64;\n                }\n\n                var options = {\n                    url: {\n                        label: 'URL',\n                        value: src,\n                        required: true\n                    },\n                    alt: {\n                        label: t.lang.description,\n                        value: $img.attr('alt')\n                    }\n                };\n\n                if (t.o.imageWidthModalEdit) {\n                    options.width = {\n                        value: $img.attr('width') ? $img.attr('width') : ''\n                    };\n                }\n\n                t.openModalInsert(t.lang.insertImage, options, function (v) {\n                    if (v.url !== base64) {\n                        $img.attr({\n                            src: v.url\n                        });\n                    }\n                    $img.attr({\n                        alt: v.alt\n                    });\n\n                    if (t.o.imageWidthModalEdit) {\n                        if (parseInt(v.width) > 0) {\n                            $img.attr({\n                                width: v.width\n                            });\n                        } else {\n                            $img.removeAttr('width');\n                        }\n                    }\n\n                    return true;\n                });\n                return false;\n            };\n        },\n\n        // Range management\n        saveRange: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection();\n\n            t.range = null;\n\n            if (!documentSelection || !documentSelection.rangeCount) {\n                return;\n            }\n\n            var savedRange = t.range = documentSelection.getRangeAt(0),\n                range = t.doc.createRange(),\n                rangeStart;\n            range.selectNodeContents(t.$ed[0]);\n            range.setEnd(savedRange.startContainer, savedRange.startOffset);\n            rangeStart = (range + '').length;\n            t.metaRange = {\n                start: rangeStart,\n                end: rangeStart + (savedRange + '').length\n            };\n        },\n        restoreRange: function () {\n            var t = this,\n                metaRange = t.metaRange,\n                savedRange = t.range,\n                documentSelection = t.doc.getSelection(),\n                range;\n\n            if (!savedRange) {\n                return;\n            }\n\n            if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n                var charIndex = 0,\n                    nodeStack = [t.$ed[0]],\n                    node,\n                    foundStart = false,\n                    stop = false;\n\n                range = t.doc.createRange();\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        var nextCharIndex = charIndex + node.length;\n                        if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                            range.setStart(node, metaRange.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                            range.setEnd(node, metaRange.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        var cn = node.childNodes,\n                            i = cn.length;\n\n                        while (i > 0) {\n                            i -= 1;\n                            nodeStack.push(cn[i]);\n                        }\n                    }\n                }\n            }\n\n            // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n            // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n            try {\n                documentSelection.removeAllRanges();\n            } catch (e) {\n            }\n\n            documentSelection.addRange(range || savedRange);\n        },\n        getRangeText: function () {\n            return this.range + '';\n        },\n\n        clearButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon';\n\n            // Reset all buttons and dropdown state\n            $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n            $('.' + originalIconClass, t.$btnPane).each(function () {\n                $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n            });\n        },\n        updateButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon',\n                tags = t.getTagsRecursive(t.doc.getSelection().focusNode);\n\n            t.clearButtonPaneStatus();\n\n            $.each(tags, function (i, tag) {\n                var btnName = t.tagToButton[tag.toLowerCase()],\n                    $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n\n                if ($btn.length > 0) {\n                    $btn.addClass(activeClasses);\n                } else {\n                    try {\n                        $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n                        var $btnSvgUse = $btn.find('svg use'),\n                            dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n                            $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n                            $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n                        // Highlight the dropdown button\n                        $dropdownBtn.addClass(activeClasses);\n\n                        // Switch dropdown icon to the active sub-icon one\n                        if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n                            // Save original icon\n                            $dropdownBtn\n                                .addClass(originalIconClass)\n                                .data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n                            // Put the active sub-button's icon\n                            $dropdownBtnSvgUse\n                                .attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n                        }\n                    } catch (e) {\n                    }\n                }\n            });\n        },\n        getTagsRecursive: function (element, tags) {\n            var t = this;\n            tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n            if (element && element.parentNode) {\n                element = element.parentNode;\n            } else {\n                return tags;\n            }\n\n            var tag = element.tagName;\n            if (tag === 'DIV') {\n                return tags;\n            }\n            if (tag === 'P' && element.style.textAlign !== '') {\n                tags.push(element.style.textAlign);\n            }\n\n            $.each(t.tagHandlers, function (i, tagHandler) {\n                tags = tags.concat(tagHandler(element, t));\n            });\n\n            tags.push(tag);\n\n            return t.getTagsRecursive(element, tags).filter(function (tag) {\n                return tag != null;\n            });\n        },\n\n        // Plugins\n        initPlugins: function () {\n            var t = this;\n            t.loadedPlugins = [];\n            $.each($.trumbowyg.plugins, function (name, plugin) {\n                if (!plugin.shouldInit || plugin.shouldInit(t)) {\n                    plugin.init(t);\n                    if (plugin.tagHandler) {\n                        t.tagHandlers.push(plugin.tagHandler);\n                    }\n                    t.loadedPlugins.push(plugin);\n                }\n            });\n        },\n        destroyPlugins: function () {\n            var t = this;\n            $.each(this.loadedPlugins, function (i, plugin) {\n                if (plugin.destroy) {\n                    plugin.destroy(t);\n                }\n            });\n        }\n    };\n})(navigator, window, document, jQuery);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}