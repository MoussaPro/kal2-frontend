{"ast":null,"code":"import { computed, onMounted, ref } from \"vue\";\nimport axios from \"axios\";\nimport DisplayField from \"@/components/DisplayField\";\nexport default {\n  __name: 'FieldsContainer',\n  props: {\n    jsonData: String\n  },\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props;\n    const apiData = ref();\n    const loading = ref();\n    const error = ref();\n    const selectedFieldId = ref(null);\n    const selectedField = computed(() => {\n      if (apiData.value) {\n        if (selectedFieldId.value === null) {\n          return apiData.value.filter(field => field.is_primary === 1)[0];\n        }\n      }\n    });\n    onMounted(() => {\n      try {\n        loading.value = true;\n        axios.get('/fields', {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(response => response.data).then(response => {\n          apiData.value = response.fields;\n          loading.value = false;\n        }).catch(response => {\n          error.value = response;\n        });\n      } catch (e) {\n        error.value = e;\n      }\n    });\n    const __returned__ = {\n      props,\n      apiData,\n      loading,\n      error,\n      selectedFieldId,\n      selectedField,\n      computed,\n      onMounted,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get DisplayField() {\n        return DisplayField;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AAoBA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,2BAA2B;;;;;;;;;;;IAMlD,MAAMC,OAAO,GAAGH,GAAG,EAAE;IACrB,MAAMI,OAAO,GAAGJ,GAAG,EAAE;IACrB,MAAMK,KAAK,GAAGL,GAAG,EAAE;IACnB,MAAMM,eAAe,GAAGN,GAAG,CAAC,IAAI,CAAC;IAEjC,MAAMO,aAAa,GAAGT,QAAQ,CAAC,MAAM;MACnC,IAAIK,OAAO,CAACK,KAAK,EAAE;QACjB,IAAIF,eAAe,CAACE,KAAK,KAAK,IAAI,EAAE;UAClC,OAAOL,OAAO,CAACK,KAAK,CAACC,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QACjE;MACF;IACF,CAAC,CAAC;IAEFZ,SAAS,CAAC,MAAM;MACd,IAAI;QACFK,OAAO,CAACI,KAAK,GAAG,IAAI;QACpBP,KAAK,CAACW,GAAG,CAAC,SAAS,EAAE;UACnBC,OAAO,EAAE;YACP,eAAe,EAAE,SAAS,GAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;UAC1D;QACF,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAACF,IAAI,CAAEC,QAAQ,IAAK;UACtDd,OAAO,CAACK,KAAK,GAAGS,QAAQ,CAACE,MAAM;UAC/Bf,OAAO,CAACI,KAAK,GAAG,KAAK;QACvB,CAAC,CAAC,CAACY,KAAK,CAAEH,QAAQ,IAAK;UACrBZ,KAAK,CAACG,KAAK,GAAGS,QAAQ;QACxB,CAAC,CAAC;MACJ,CAAC,CAAC,OAAMI,CAAC,EAAE;QACThB,KAAK,CAACG,KAAK,GAAGa,CAAC;MACjB;IACF,CAAC,CAAC","names":["computed","onMounted","ref","axios","DisplayField","apiData","loading","error","selectedFieldId","selectedField","value","filter","field","is_primary","get","headers","localStorage","getItem","then","response","data","fields","catch","e"],"sources":["/Users/khaled.el-moussa/Desktop/Projekter/Kal2/frontend/src/components/NewTask/Fields/FieldsContainer.vue"],"sourcesContent":["<template>\n  <div class=\"bg-gray-50 overflow-y-scroll relative max-h-[40vh] rounded-md\" :class=\"{'h-[200px]': loading}\">\n    <Loader :loading=\"loading\"/>\n    <div class=\"flex items-center justify-between p-2\">\n      <p class=\"font-inter text-[13px] font-light mx-auto absolute top-[-10px] leading-none rounded flex items-center\">\n        {{ selectedField.title }}\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" class=\"w-4 mt-[1px] ml-1\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 8.25l-7.5 7.5-7.5-7.5\" />\n        </svg>\n      </p>\n    </div>\n    <div class=\"grid grid-cols-2 bg-gray-50 gap-x-5 gap-y-4 px-2 pb-4\">\n      <div v-for=\"field in JSON.parse(selectedField.fields)\" v-if=\"selectedField\">\n        <DisplayField :field=\"field\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, onMounted, ref } from \"vue\";\nimport axios from \"axios\";\nimport DisplayField from \"@/components/DisplayField\";\n\n  const props = defineProps({\n    jsonData: String\n  });\n\n  const apiData = ref();\n  const loading = ref();\n  const error = ref();\n  const selectedFieldId = ref(null);\n\n  const selectedField = computed(() => {\n    if (apiData.value) {\n      if (selectedFieldId.value === null) {\n        return apiData.value.filter(field => field.is_primary === 1)[0]\n      }\n    }\n  });\n\n  onMounted(() => {\n    try {\n      loading.value = true;\n      axios.get('/fields', {\n        headers: {\n          'Authorization': 'Bearer '+ localStorage.getItem('token')\n        }\n      }).then((response) => response.data).then((response) => {\n        apiData.value = response.fields;\n        loading.value = false;\n      }).catch((response) => {\n        error.value = response;\n      });\n    } catch(e) {\n      error.value = e;\n    }\n  });\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}