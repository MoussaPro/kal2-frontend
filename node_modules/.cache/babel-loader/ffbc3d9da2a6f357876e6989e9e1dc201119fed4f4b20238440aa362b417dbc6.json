{"ast":null,"code":"import { provide, ref } from \"vue\";\nexport default {\n  __name: 'ProductSection',\n  props: {\n    title: {\n      type: String\n    },\n    number: {\n      type: Number\n    },\n    showCounter: {\n      type: Boolean,\n      default: false\n    },\n    filterView: {\n      type: Boolean,\n      default: false\n    },\n    products: {\n      type: Object\n    }\n  },\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props;\n\n    // Get the standarded products from pageload\n    const apiProducts = props.products.slice(0, props.number);\n\n    // Manipulate products array by search and filters\n    const products = ref(apiProducts);\n\n    // On search\n    const search = q => {\n      if (q === '') {\n        products.value = apiProducts;\n      }\n      products.value = products.value.filter(item => item.title.toLowerCase().includes(q.toLowerCase()));\n    };\n    const sortByPrice = sortBy => {\n      switch (sortBy) {\n        case 'none':\n          products.value = products.value.sort();\n          break;\n        case 'price_low':\n          products.value = products.value.sort((a, b) => {\n            let fa = a.price,\n              fb = b.price;\n            if (fa < fb) {\n              return -1;\n            }\n            if (fa > fb) {\n              return 1;\n            }\n            return 0;\n          });\n          break;\n        case 'price_high':\n          products.value = products.value.sort((b, a) => {\n            let fa = a.price,\n              fb = b.price;\n            if (fa < fb) {\n              return -1;\n            }\n            if (fa > fb) {\n              return 1;\n            }\n            return 0;\n          });\n          break;\n      }\n    };\n\n    // Provide the data to the FilterComponent\n    provide('provideData', {\n      title: props.title,\n      showCounter: props.showCounter,\n      number: props.number\n    });\n    const __returned__ = {\n      props,\n      apiProducts,\n      products,\n      search,\n      sortByPrice,\n      provide,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AAkBA,SAASA,OAAO,EAAEC,GAAG,QAAQ,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBhC;IACA,MAAMC,WAAW,GAAGC,KAAK,CAACC,QAAQ,CAACC,KAAK,CAAC,CAAC,EAAEF,KAAK,CAACG,MAAM,CAAC;;IAEzD;IACA,MAAMF,QAAQ,GAAGH,GAAG,CAACC,WAAW,CAAC;;IAEjC;IACA,MAAMK,MAAM,GAAIC,CAAC,IAAK;MACpB,IAAIA,CAAC,KAAK,EAAE,EAAE;QACZJ,QAAQ,CAACK,KAAK,GAAGP,WAAW;MAC9B;MAEAE,QAAQ,CAACK,KAAK,GAAGL,QAAQ,CAACK,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,KAAK,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACN,CAAC,CAACK,WAAW,EAAE,CAAC,CAAC;IACtG,CAAC;IAED,MAAME,WAAW,GAAIC,MAAM,IAAK;MAC9B,QAAQA,MAAM;QACZ,KAAK,MAAM;UACTZ,QAAQ,CAACK,KAAK,GAAGL,QAAQ,CAACK,KAAK,CAACQ,IAAI,EAAE;UACtC;QACF,KAAK,WAAW;UACdb,QAAQ,CAACK,KAAK,GAAGL,QAAQ,CAACK,KAAK,CAACQ,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC,KAAK;YAC5C,IAAIC,EAAE,GAAGF,CAAC,CAACG,KAAK;cAAEC,EAAE,GAAGH,CAAC,CAACE,KAAK;YAC9B,IAAID,EAAE,GAAGE,EAAE,EAAE;cACX,OAAO,CAAC,CAAC;YACX;YACA,IAAIF,EAAE,GAAGE,EAAE,EAAE;cACX,OAAO,CAAC;YACV;YACA,OAAO,CAAC;UACV,CAAC,CAAC;UACF;QACF,KAAK,YAAY;UACflB,QAAQ,CAACK,KAAK,GAAGL,QAAQ,CAACK,KAAK,CAACQ,IAAI,CAAC,CAACE,CAAC,EAACD,CAAC,KAAK;YAC5C,IAAIE,EAAE,GAAGF,CAAC,CAACG,KAAK;cAAEC,EAAE,GAAGH,CAAC,CAACE,KAAK;YAC9B,IAAID,EAAE,GAAGE,EAAE,EAAE;cACX,OAAO,CAAC,CAAC;YACX;YACA,IAAIF,EAAE,GAAGE,EAAE,EAAE;cACX,OAAO,CAAC;YACV;YACA,OAAO,CAAC;UACV,CAAC,CAAC;UACF;MAAM;IAEZ,CAAC;;IAED;IACAtB,OAAO,CAAC,aAAa,EAAE;MAAEY,KAAK,EAAET,KAAK,CAACS,KAAK;MAAEW,WAAW,EAAEpB,KAAK,CAACoB,WAAW;MAAEjB,MAAM,EAAEH,KAAK,CAACG;IAAO,CAAC,CAAC","names":["provide","ref","apiProducts","props","products","slice","number","search","q","value","filter","item","title","toLowerCase","includes","sortByPrice","sortBy","sort","a","b","fa","price","fb","showCounter"],"sources":["/Users/khaled.el-moussa/Desktop/Projekter/Kal2/frontend/src/components/Content/ProductSection.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-if=\"filterView\" class=\"flex justify-between bg-gray-50 rounded-md shadow\">\n      <FilterView @searchProduct=\"(q) => search(q)\" @sortBy=\"(sortBy) => sortByPrice(sortBy)\"/>\n    </div>\n    <div class=\"flex items-center\" v-else>\n      <h2 class=\"text-[25px] text-gray-600 font-light leading-20\">{{ title }}</h2>\n      <h3 class=\"text-[17px] text-gray-600 font-medium ml-[5px] leading-20 mt-[4px]\" v-if=\"showCounter\"> - {{ number }} ialt</h3>\n    </div>\n    <div class=\"flex flex-wrap -mx-2\">\n      <div class=\"px-2 w-1/4 mt-5\" ref=\"product_card\" v-for=\"(product, index) in products\" :key=\"index\">\n        <ProductCard :id=\"index\" :product=\"product\"/>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { provide, ref } from \"vue\";\n\n  const props = defineProps({\n    title: {\n      type: String\n    },\n    number: {\n      type: Number\n    },\n    showCounter: {\n      type: Boolean,\n      default: false\n    },\n    filterView: {\n      type: Boolean,\n      default: false\n    },\n    products: {\n      type: Object\n    }\n  });\n\n  // Get the standarded products from pageload\n  const apiProducts = props.products.slice(0, props.number);\n\n  // Manipulate products array by search and filters\n  const products = ref(apiProducts);\n\n  // On search\n  const search = (q) => {\n    if (q === '') {\n      products.value = apiProducts;\n    }\n\n    products.value = products.value.filter((item) => item.title.toLowerCase().includes(q.toLowerCase()));\n  }\n\n  const sortByPrice = (sortBy) => {\n    switch (sortBy) {\n      case 'none':\n        products.value = products.value.sort();\n        break;\n      case 'price_low':\n        products.value = products.value.sort((a,b) => {\n          let fa = a.price, fb = b.price;\n          if (fa < fb) {\n            return -1\n          }\n          if (fa > fb) {\n            return 1\n          }\n          return 0\n        });\n        break;\n      case 'price_high':\n        products.value = products.value.sort((b,a) => {\n          let fa = a.price, fb = b.price;\n          if (fa < fb) {\n            return -1\n          }\n          if (fa > fb) {\n            return 1\n          }\n          return 0\n        });\n        break;\n    }\n  }\n\n  // Provide the data to the FilterComponent\n  provide('provideData', { title: props.title, showCounter: props.showCounter, number: props.number })\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}