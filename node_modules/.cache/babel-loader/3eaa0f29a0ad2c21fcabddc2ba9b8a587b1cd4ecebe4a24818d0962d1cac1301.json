{"ast":null,"code":"!function (e, n) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = n() : \"function\" == typeof define && define.amd ? define(n) : (e || self)[\"v-click-outside\"] = n();\n}(this, function () {\n  var e = \"__v-click-outside\",\n    n = \"undefined\" != typeof window,\n    t = \"undefined\" != typeof navigator,\n    r = n && (\"ontouchstart\" in window || t && navigator.msMaxTouchPoints > 0) ? [\"touchstart\"] : [\"click\"],\n    i = function (e) {\n      var n = e.event,\n        t = e.handler;\n      (0, e.middleware)(n) && t(n);\n    },\n    a = function (n, t) {\n      var a = function (e) {\n          var n = \"function\" == typeof e;\n          if (!n && \"object\" != typeof e) throw new Error(\"v-click-outside: Binding value must be a function or an object\");\n          return {\n            handler: n ? e : e.handler,\n            middleware: e.middleware || function (e) {\n              return e;\n            },\n            events: e.events || r,\n            isActive: !(!1 === e.isActive),\n            detectIframe: !(!1 === e.detectIframe),\n            capture: Boolean(e.capture)\n          };\n        }(t.value),\n        o = a.handler,\n        d = a.middleware,\n        c = a.detectIframe,\n        u = a.capture;\n      if (a.isActive) {\n        if (n[e] = a.events.map(function (e) {\n          return {\n            event: e,\n            srcTarget: document.documentElement,\n            handler: function (e) {\n              return function (e) {\n                var n = e.el,\n                  t = e.event,\n                  r = e.handler,\n                  a = e.middleware,\n                  o = t.path || t.composedPath && t.composedPath();\n                (o ? o.indexOf(n) < 0 : !n.contains(t.target)) && i({\n                  event: t,\n                  handler: r,\n                  middleware: a\n                });\n              }({\n                el: n,\n                event: e,\n                handler: o,\n                middleware: d\n              });\n            },\n            capture: u\n          };\n        }), c) {\n          var l = {\n            event: \"blur\",\n            srcTarget: window,\n            handler: function (e) {\n              return function (e) {\n                var n = e.el,\n                  t = e.event,\n                  r = e.handler,\n                  a = e.middleware;\n                setTimeout(function () {\n                  var e = document.activeElement;\n                  e && \"IFRAME\" === e.tagName && !n.contains(e) && i({\n                    event: t,\n                    handler: r,\n                    middleware: a\n                  });\n                }, 0);\n              }({\n                el: n,\n                event: e,\n                handler: o,\n                middleware: d\n              });\n            },\n            capture: u\n          };\n          n[e] = [].concat(n[e], [l]);\n        }\n        n[e].forEach(function (t) {\n          var r = t.event,\n            i = t.srcTarget,\n            a = t.handler;\n          return setTimeout(function () {\n            n[e] && i.addEventListener(r, a, u);\n          }, 0);\n        });\n      }\n    },\n    o = function (n) {\n      (n[e] || []).forEach(function (e) {\n        return e.srcTarget.removeEventListener(e.event, e.handler, e.capture);\n      }), delete n[e];\n    },\n    d = n ? {\n      beforeMount: a,\n      updated: function (e, n) {\n        var t = n.value,\n          r = n.oldValue;\n        JSON.stringify(t) !== JSON.stringify(r) && (o(e), a(e, {\n          value: t\n        }));\n      },\n      unmounted: o\n    } : {};\n  return {\n    install: function (e) {\n      e.directive(\"click-outside\", d);\n    },\n    directive: d\n  };\n});","map":{"version":3,"mappings":";;;;8BAIMA,MAAoB;IAAAC,mBACpBC,OAAgCC;IAAAC,UAAXC,cACgB,mBAAdF,UAKvBG,gBAFH,qBACEC,CAAiBJ,YAAUK;IAAAA;MAAAA,IAAmBC,CACzB,GAACC;QAAAT,aAAiB;MAAA,KAiBtCU,WAAc,SAAGC;IAAAA;IAAAA,cAAOC;MAAAA,IACxBC,IADiCA;UACtBF,IACbC,IAAQD,UAgCQ,WAACG;UAAAA,MAlDa,YAACC,IACjC,OAA2CN,mBAAjBM,gEAGtB;UAAA;YAAAH;YAAAC,wBAIFD,cAAqCG,GAAaH;cAAAA,OAClDC;YAAAA;YAAAA,SAAYE,OAAaF;YAAAA,QAAe,KAACG,gBACzCC;YAAAA,YAAqBA,IAAUZ,CAC/Ba,oBAAyBA;YAAAA,SACzBC,iBAA8C;UAAA;QAAA,CAA9BJ,EAAaI;QAAAA,aAC7BC;QAAAA,IAASC,YAAqBD;QAAAA,kBAqCPE;QAGvBV;MACAC;QAEAM,oBACAC,cAEFX;UAAA,OAJES;YAAAA,KAaF,GANAJ;YAAAA,SAVEG,UAUiC,gBAACM;YAAeX,OAC1CW,YACPC,GAAWC;cAAAA,iBAASC;gBAAAA,KACpBd;kBAAAA,IAASH;kBAAAN,CAACQ,YA7BE;kBAAAgB;kBAAGb,UAAIH,kBAAOC,kBAASC;gBAAAA,CAK/Be,IAAOjB,EAAMiB,OAASjB,CAAMkB,oBAAsBA;kBACjCD,KACdE;kBAAAA,OAAc;kBAClBhB,UAAGiB,EAASpB;gBAAAA,CAAMqB;cAAAA;gBAAAA;gBAAAA,KAITrB;gBAAAA,OAAOC;gBAAAA,UAASC;cAAAA;YAAAA;YAAAA,OAiBEC;UAAAA,CAAIH;QAAAA;UAAAA,IAAOC;YAAAA,KAASC;YAAAA,SAClDO;YAAAA,OAGA,YACET;cAAO,OACPa,WAAWpB;gBAAAA,KACXQ;kBAAAA,IAASH;kBAAAN,CAACQ,YAnDU;kBAAAgB;gBAAGb,UAAIH,aAAOC;kBAAAA,gBAASC,cAI/CoB;kBAAAA,aAAW,cACiBR,eAAlBS;oBAENA,KAC0B;oBAAAtB,OAA1BsB,EAAcC;oBAAAA,UACVJ;kBAAAA;gBAAAA;cAAAA,CAASG;gBAAAA,EAEbxB,GAAY;gBAAEC;gBAAOC;gBAASC;cAAAA;YAAAA;YAE/BO,OAsCyCN;UAAAA,CAAIH;UAAAA,SAAOC,UAASC;QAAAA;QAAAA,YAC5DO,WAECrB;UAAAA,eAA4BA;YAAAA,CAAoBqC,cAE/BC;YAAAA,MAAQzB;UAAA,iBAAGD,CAAOa;YAAAA,GAAoBc,MAAT1B,iBACjDqB;UAAAA,GAAW;QAAA;MAAA;IAAA;IAAAM,cAMTf,CAAUgB;MAAAA,oBAAwBF,CAAalB,UAC9CX,GAGDgC;QAAAA,OAAYhC,WACIV,oBACH,mBAAUyB,WACfkB;MAAAA;IAAAA;IAAAA,IADQ/B;MAAAA,WAAkBC;MAAAA,OAASQ,eAGxCN,GAAGf;QAAAA,KAcGE,IALG,CAChB0C;UAAAA,cACAC;QAAAA,IATc,UAAC9B,YAAMQ,UAAOuB,YACxBC,OAAKC;UAAAA;QAAAA,EAAUzB;MAAAA;MAAAA,SAAgByB;IAAAA;EAAAA,OAGnCN;IAAAA,OACY3B,EAAI,UAAEQ;MAAAA,CAKlBmB,0BClHAO;IAAAA;IAAAA,SAAQC;EAAAA,CACNA;AAAAA,EAAIC","names":["HANDLERS_PROPERTY","t","HAS_WINDOWS","navigator","r","window","EVENTS","HAS_NAVIGATOR","msMaxTouchPoints","n","e","execHandler","event","handler","middleware","el","bindingValue","item","events","isActive","detectIframe","capture","Boolean","value","eventName","srcTarget","document","documentElement","a","path","composedPath","indexOf","contains","target","setTimeout","activeElement","tagName","detectIframeEvent","forEach","thisHandler","o","addEventListener","unmounted","removeEventListener","beforeMount","updated","oldValue","JSON","stringify","install","Vue","directive"],"sources":["../src/v-click-outside.js","../src/index.js"],"sourcesContent":["/**\n * Modified for Vue 3 from https://github.com/ndelvalle/v-click-outside\n * Cf. https://github.com/ndelvalle/v-click-outside/issues/238\n */\nconst HANDLERS_PROPERTY = \"__v-click-outside\";\nconst HAS_WINDOWS = typeof window !== \"undefined\";\nconst HAS_NAVIGATOR = typeof navigator !== \"undefined\";\nconst IS_TOUCH =\n  HAS_WINDOWS &&\n  (\"ontouchstart\" in window ||\n    (HAS_NAVIGATOR && navigator.msMaxTouchPoints > 0));\nconst EVENTS = IS_TOUCH ? [\"touchstart\"] : [\"click\"];\nconst processDirectiveArguments = (bindingValue) => {\n  const isFunction = typeof bindingValue === \"function\";\n  if (!isFunction && typeof bindingValue !== \"object\") {\n    throw new Error(\n      \"v-click-outside: Binding value must be a function or an object\"\n    );\n  }\n  return {\n    handler: isFunction ? bindingValue : bindingValue.handler,\n    middleware: bindingValue.middleware || ((item) => item),\n    events: bindingValue.events || EVENTS,\n    isActive: !(bindingValue.isActive === false),\n    detectIframe: !(bindingValue.detectIframe === false),\n    capture: Boolean(bindingValue.capture),\n  };\n};\nconst execHandler = ({ event, handler, middleware }) => {\n  if (middleware(event)) {\n    handler(event);\n  }\n};\nconst onFauxIframeClick = ({ el, event, handler, middleware }) => {\n  // Note: on firefox clicking on iframe triggers blur, but only on\n  //       next event loop it becomes document.activeElement\n  // https://stackoverflow.com/q/2381336#comment61192398_23231136\n  setTimeout(() => {\n    const { activeElement } = document;\n    if (\n      activeElement &&\n      activeElement.tagName === \"IFRAME\" &&\n      !el.contains(activeElement)\n    ) {\n      execHandler({ event, handler, middleware });\n    }\n  }, 0);\n};\nconst onEvent = ({ el, event, handler, middleware }) => {\n  // Note: composedPath is not supported on IE and Edge, more information here:\n  //       https://developer.mozilla.org/en-US/docs/Web/API/Event/composedPath\n  //       In the meanwhile, we are using el.contains for those browsers, not\n  //       the ideal solution, but using IE or EDGE is not ideal either.\n  const path = event.path || (event.composedPath && event.composedPath());\n  const isClickOutside = path\n    ? path.indexOf(el) < 0\n    : !el.contains(event.target);\n  if (!isClickOutside) {\n    return;\n  }\n  execHandler({ event, handler, middleware });\n};\nconst beforeMount = (el, { value }) => {\n  const {\n    events,\n    handler,\n    middleware,\n    isActive,\n    detectIframe,\n    capture,\n  } = processDirectiveArguments(value);\n  if (!isActive) {\n    return;\n  }\n  el[HANDLERS_PROPERTY] = events.map((eventName) => ({\n    event: eventName,\n    srcTarget: document.documentElement,\n    handler: (event) => onEvent({ el, event, handler, middleware }),\n    capture,\n  }));\n  if (detectIframe) {\n    const detectIframeEvent = {\n      event: \"blur\",\n      srcTarget: window,\n      handler: (event) => onFauxIframeClick({ el, event, handler, middleware }),\n      capture,\n    };\n    el[HANDLERS_PROPERTY] = [...el[HANDLERS_PROPERTY], detectIframeEvent];\n  }\n  el[HANDLERS_PROPERTY].forEach(({ event, srcTarget, handler: thisHandler }) =>\n    setTimeout(() => {\n      // Note: More info about this implementation can be found here:\n      //       https://github.com/ndelvalle/v-click-outside/issues/137\n      if (!el[HANDLERS_PROPERTY]) {\n        return;\n      }\n      srcTarget.addEventListener(event, thisHandler, capture);\n    }, 0)\n  );\n};\nconst unmounted = (el) => {\n  const handlers = el[HANDLERS_PROPERTY] || [];\n  handlers.forEach(({ event, srcTarget, handler, capture }) =>\n    srcTarget.removeEventListener(event, handler, capture)\n  );\n  delete el[HANDLERS_PROPERTY];\n};\nconst updated = (el, { value, oldValue }) => {\n  if (JSON.stringify(value) === JSON.stringify(oldValue)) {\n    return;\n  }\n  unmounted(el);\n  beforeMount(el, { value });\n};\nconst directive = {\n  beforeMount,\n  updated,\n  unmounted,\n};\nexport default HAS_WINDOWS ? directive : {};\n","import directive from './v-click-outside'\n\nconst plugin = {\n  install(Vue) {\n    Vue.directive('click-outside', directive)\n  },\n  directive,\n}\n\nexport default plugin\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}