{"ast":null,"code":"import axios from 'axios';\nclass Auth {\n  constructor() {\n    this.token = window.localStorage.getItem('token');\n    let userData = window.localStorage.getItem('user');\n    this.user = userData ? JSON.parse(userData) : null;\n    if (this.token) {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + this.token;\n    }\n  }\n  login(token, user) {\n    window.localStorage.setItem('token', token);\n    window.localStorage.setItem('user', JSON.stringify(user));\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    this.token = token;\n    this.user = user;\n  }\n  check() {\n    // If token unvalid, force logout\n    axios.get('validate-token').catch(function (error) {\n      if (error.response && error.response.status === 401) {\n        window.localStorage.removeItem('token');\n        window.localStorage.removeItem('user');\n      }\n    });\n    return !!this.token;\n  }\n  logout(route = 'index') {\n    // window.localStorage.clear();\n    window.localStorage.removeItem('token');\n    window.localStorage.removeItem('user');\n    this.user = null;\n  }\n}\nexport default new Auth();","map":{"version":3,"names":["axios","Auth","constructor","token","window","localStorage","getItem","userData","user","JSON","parse","defaults","headers","common","login","setItem","stringify","check","get","catch","error","response","status","removeItem","logout","route"],"sources":["/Users/khaled.el-moussa/Desktop/Projekter/Kal2/frontend/src/models/Auth.js"],"sourcesContent":["import axios from 'axios';\n\nclass Auth {\n  constructor () {\n    this.token = window.localStorage.getItem('token');\n    let userData = window.localStorage.getItem('user');\n    this.user = userData ? JSON.parse(userData) : null;\n    if (this.token) {\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + this.token;\n    }\n  }\n  login (token, user) {\n    window.localStorage.setItem('token', token);\n    window.localStorage.setItem('user', JSON.stringify(user));\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n    this.token = token;\n    this.user = user;\n  }\n  check() {\n    // If token unvalid, force logout\n    axios.get('validate-token').catch(function (error) {\n      if (error.response && error.response.status === 401) {\n        window.localStorage.removeItem('token');\n        window.localStorage.removeItem('user');\n      }\n    });\n\n    return !! this.token;\n  }\n  logout (route = 'index') {\n    // window.localStorage.clear();\n    window.localStorage.removeItem('token');\n    window.localStorage.removeItem('user');\n    this.user = null;\n\n  }\n}\nexport default new Auth();"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,IAAI,CAAC;EACTC,WAAW,GAAI;IACb,IAAI,CAACC,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACjD,IAAIC,QAAQ,GAAGH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAClD,IAAI,CAACE,IAAI,GAAGD,QAAQ,GAAGE,IAAI,CAACC,KAAK,CAACH,QAAQ,CAAC,GAAG,IAAI;IAClD,IAAI,IAAI,CAACJ,KAAK,EAAE;MACdH,KAAK,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAG,IAAI,CAACV,KAAK;IACzE;EACF;EACAW,KAAK,CAAEX,KAAK,EAAEK,IAAI,EAAE;IAClBJ,MAAM,CAACC,YAAY,CAACU,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;IAC3CC,MAAM,CAACC,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEN,IAAI,CAACO,SAAS,CAACR,IAAI,CAAC,CAAC;IACzDR,KAAK,CAACW,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGV,KAAK;IAClE,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACK,IAAI,GAAGA,IAAI;EAClB;EACAS,KAAK,GAAG;IACN;IACAjB,KAAK,CAACkB,GAAG,CAAC,gBAAgB,CAAC,CAACC,KAAK,CAAC,UAAUC,KAAK,EAAE;MACjD,IAAIA,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QACnDlB,MAAM,CAACC,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;QACvCnB,MAAM,CAACC,YAAY,CAACkB,UAAU,CAAC,MAAM,CAAC;MACxC;IACF,CAAC,CAAC;IAEF,OAAO,CAAC,CAAE,IAAI,CAACpB,KAAK;EACtB;EACAqB,MAAM,CAAEC,KAAK,GAAG,OAAO,EAAE;IACvB;IACArB,MAAM,CAACC,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;IACvCnB,MAAM,CAACC,YAAY,CAACkB,UAAU,CAAC,MAAM,CAAC;IACtC,IAAI,CAACf,IAAI,GAAG,IAAI;EAElB;AACF;AACA,eAAe,IAAIP,IAAI,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}